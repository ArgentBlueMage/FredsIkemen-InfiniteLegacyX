;変数使用表
;　1 = 空中ヒット制限
;　2 = 空中ヒット制限(カウンター時)
;　3 = イヤリング爆弾用
;　4 = スロー処理
;　5 = ステート内自由変数１
;　6 = ステート内自由変数２
;　7 = ＭＡＸキャンセル用
;　8 = カウンター
;　9 = 相手キャラクター判別
; 10 = プレイヤーの向き設定
; 11 = 暗転用変数
; 12 = KOサウンド
; 13 = 空中ヒット制限(イヤリング爆弾)
; 14 = ヒット数
; 15 = ハイジャンプ
; 16 = 小ジャンプ
; 17 = 勝利フラグ
; 18 = ガードクラッシュ値
; 19 = ドライブゲージ
; 20 = ハイパードライブモード残り時間
; 21 = ドライブゲージ回復停止時間
; 22 = ハイパードライブモード時のゲージ固定
; 23 = チーム戦用ドライブゲージ
; 24 = ガードクラッシュ回復不能時間
; 25 = 勝利画面演出の有無
; 26 = 
; 27 = 
; 28 = 
; 29 = AC版(0)or家庭用版(1)
; 30 = 

; f(1) = 攻撃補正
; f(2) = レオナブレード用
; f(3) = 特殊イントロセリフ用
; f(4) = ガードクラッシュのしやすさ
; f(5) = 
; f(6) = 崩れKO用
; f(7) = KOボイス用
; f(8) = 
; f(9) = 先行入力受付時間
; f(10) = 先行入力ステート番号
; f(11) = 先行入力時のボタン強弱

; channel = 4	
; channel = 5	イントロ


[Data]
life = 1000
power = 5000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 20
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 255
IntPersistIndex = 0
FloatPersistIndex = 40

[Size]
xscale = 0.5           ;Horizontal scaling factor.
yscale = 0.5           ;Vertical scaling factor.
ground.back = 22     ;Player width (back, ground)
ground.front = 22    ;Player width (front, ground)
air.back = 22        ;Player width (back, air)
air.front = 22      ;Player width (front, air)
height = 80          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = 0, -90   ;Approximate position of head
mid.pos = 0, -64    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.7 ;3.075      ;Walk forward
walk.back = -2.7 ;-3.075     ;Walk backward
run.fwd  = 7.0, 0 ;9, 0    ;Run forward (x, y)
run.back = -4.4,-3.8 ;-11.0,-6.0 ;Hop backward (x, y)
jump.neu = 0,-11 :0,-12.0    ;Neutral jumping velocity (x, y)30
jump.back = -2.55 ;-2.85    ;Jump back Speed (x, y)
jump.fwd = 3.5       ;Jump forward Speed (x, y)
runjump.back =  -2.55, -8.5 ;-2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4,-8.5 ; 7,-8.1      ;.
airjump.neu = 0,-8.5 ; 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .6 ; .44         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching


;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
sprpriority = 0

[State 40]
type = turn
trigger1 = time = 0 && P2dist X < 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = ifelse(var(59) >= 1,0,1)

;---------------------[効果音]
[State 00]
type = PlaySnd
trigger1 = Time= 0
value = 100, 0
loop = 1
channel = 1

;---------------------[速度]
[State 01]
type = VelSet
trigger1 = animelem = 2,>=0
x = const(velocity.run.fwd.x)

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;---------------------[ステート移行]

[State 04];プレイヤー
type = ChangeState
triggerall = time >= 14
trigger1 = command != "holdfwd" && var(59) <= 0
value = 101
ctrl = 1

[State 04];AI通常
type = ChangeState
triggerall = time >= 14 && roundstate = 2 && var(59) >= 1
trigger1 = p2statetype = L && p2bodydist X <= 50
trigger2 = p2statetype != L && p2bodydist X <= 20
trigger3 = p2movetype = A && p2bodydist X <= 100
trigger4 = roundstate != 2 || inguarddist
value = 101
ctrl = 1

[State 04];AI勝利後
type = ChangeState
triggerall = time >= 14 && roundstate != 2 && var(59) >= 1
trigger1 = EnemyNear(Var(53)),statetype != A && BackEdgeBodyDist > 50
trigger2 = p2dist X = [-320,-1]
trigger3 = FrontEdgeBodyDist < 120
trigger4 = time >= 200 || inguarddist || roundstate != 3
value = 101
ctrl = 1

;---------------------------------------------------------------------------
; ダッシュ終了
[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 1
velset = 0,0
ctrl = 1

;---------------------[効果音]
[State 00]
type = stopSnd
trigger1 = Time= 0
channel = 1

;---------------------[ステート移行]
[State 04]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; バックステップ
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 105
sprpriority = 1
velset = 0.0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

;---------------------[効果音]
[State 00]
type = PlaySnd
trigger1 = animelem = 2
value = 105, 0

;---------------------[速度]
[state a]
type = statetypeset
triggerall = var(29) >= 1
trigger1 = time = 1
value = A

[state a]
type = statetypeset
triggerall = var(29) <= 0
trigger1 = animelem = 2
value = A

[State 00];10
type = VelSet
trigger1 = animelem = 2
x = -10
y = -5.5

[state a]
type = veladd
trigger1 = animelem = 2,>0
y = 0.9

[state a]
type = velmul
trigger1 = 1
x = 0.95

;---------------------[ステート移行]
[State 01]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; 着地
[Statedef 106]
type    = S
physics = N
ctrl = 0
anim = 106
velset = 0,0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = time = 0
value = 41,0

;---------------------[速度]
[State 00]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 01]
type = PosSet
trigger1 = Time = 0
y = 0

;---------------------[ステート移行]
[State 03]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
; CNS レベル: 基本
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
; CNS レベル: 基本
[Statedef 180]
type = S


;---------------------[]

[State 01];通常勝利ポーズ・初戦
type = ChangeState
trigger1 = time = 0
value = 181

;---------------------------------------------------------------------------
; 通常勝利1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 5
value = 181,0

[state a]
type = AssertSpecial
trigger1 = var(25) >= 1
trigger1 = matchover = 1
trigger1 = time >= 260
flag = noshadow
flag2 = invisible

;---------------------[ヘルパー]
[state a];勝利画面
type = Helper
trigger1 = var(25) >= 1
trigger1 = matchover = 1
trigger1 = time = 220
id = 8500
name = "g"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1 
ownpal = 1

;---------------------[演出]
[State 185, 4]
type = AssertSpecial
trigger1 = time = [0,240]
flag = roundnotover

;---------------------------------------------------------------------------
; 登場
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

;---------------------[特殊イントロ]

[state a];特殊イントロ(舞XIII)
type = changestate
trigger1 = Enemynear,name = "Shiranui Mai" && Enemynear,authorname = "P-tan"
value = 196

[state a];特殊イントロ(クーラXIII)
type = changestate
trigger1 = Enemynear,name = "Kula Diamond" && Enemynear,authorname = "P-tan"
value = 197

[state a];特殊イントロ(イズコXIII)
type = changestate
trigger1 = Enemynear,name = "Izuko Chrysoberyl" && Enemynear,authorname = "P-tan"
value = 198

;---------------------[演出]
[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

;---------------------[ステート移行]
[State 191, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;---------------------------------------------------------------------------
; イントロ（対舞XIII）
[Statedef 196]
type = S
ctrl = 0
anim = 0
velset = 0,0

;---------------------[演出]
[State 196, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = NoBarDisplay

[state a]
type = varset
triggerall = fvar(3) != 0
trigger1 = time = 0
fvar(3) = 0

[state a]
type = varadd
triggerall = fvar(3) < 0.5
trigger1 = time = [30,40]
fvar(3) = 0.05

[state a]
type = ModifyExplod
trigger1 = 1
ID = 8210
scale = fvar(3),fvar(3)

[State 181, 0];黒地
type = Explod
trigger1 = Time = 30
anim = ifelse(facing = 1,8230,8235)
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122)
postype = left
sprpriority = 95
ownpal = 1
ontop = 1
scale = 0,0.5
bindtime = -1
removetime = 420

[State 181, 0];枠
type = null ;Explod
trigger1 = Time = 30
anim = 8210
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122) ;0,45
postype = left
sprpriority = 98
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 30
anim = 8200
ID = 8200
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 420

;----

[State 181, 0];キャラグラ１
type = Explod
trigger1 = Time = 50
anim = 8300
ID = 8300
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ
type = Explod
trigger1 = Time = 50
anim = ifelse(facing = 1,8220,8225)
ID = 8220
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１
type = Explod
trigger1 = Time = 50
anim = 8420
ID = 8400
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8301
ID = 8301
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 150
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8421
ID = 8401
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２
type = Explod
trigger1 = Time = 250
anim = 8312
ID = 8312
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・復活
type = Explod
trigger1 = Time = 250
anim = ifelse(facing = 1,8223,8228)
ID = 8223
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・消滅
type = Explod
trigger1 = Time = 250
anim = 8422
ID = 8402
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２
type = Explod
trigger1 = Time = 250
anim = 8425
ID = 8405
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・暗転
type = Explod
trigger1 = Time = 350
anim = 8311
ID = 8311
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 350
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 350
anim = 8426
ID = 8406
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8314
ID = 8314
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
facing = facing

[State 181, 0];フキダシ・消滅
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8224,8229)
ID = 8224
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8427
ID = 8407
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;----

[State 181, 0];黒地
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8231,8236)
ID = 8231
pos = 0,45
postype = left
sprpriority = 97
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 450
anim = 8201
ID = 8201
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;---------------------[ステート移行]
[State 196, 3]
type = ChangeState
trigger1 = time >= 460
value = 0

;---------------------------------------------------------------------------
; イントロ（対クーラXIII）
[Statedef 197]
type = S
ctrl = 0
anim = 0
velset = 0,0

;---------------------[演出]
[State 196, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = NoBarDisplay

[state a]
type = varset
triggerall = fvar(3) != 0
trigger1 = time = 0
fvar(3) = 0

[state a]
type = varadd
triggerall = fvar(3) < 0.5
trigger1 = time = [30,40]
fvar(3) = 0.05

[state a]
type = ModifyExplod
trigger1 = 1
ID = 8210
scale = fvar(3),fvar(3)

[State 181, 0];黒地
type = Explod
trigger1 = Time = 30
anim = ifelse(facing = 1,8230,8235)
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122)
postype = left
sprpriority = 95
ownpal = 1
ontop = 1
scale = 0,0.5
bindtime = -1
removetime = 420

[State 181, 0];枠
type = null ;Explod
trigger1 = Time = 30
anim = 8210
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122) ;0,45
postype = left
sprpriority = 98
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 30
anim = 8200
ID = 8200
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 420

;----

[State 181, 0];キャラグラ１
type = Explod
trigger1 = Time = 50
anim = 8300
ID = 8300
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ
type = Explod
trigger1 = Time = 50
anim = ifelse(facing = 1,8220,8225)
ID = 8220
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１
type = Explod
trigger1 = Time = 50
anim = 8400
ID = 8400
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8301
ID = 8301
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 150
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8401
ID = 8401
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２
type = Explod
trigger1 = Time = 250
anim = 8312
ID = 8312
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・復活
type = Explod
trigger1 = Time = 250
anim = ifelse(facing = 1,8223,8228)
ID = 8223
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・消滅
type = Explod
trigger1 = Time = 250
anim = 8402
ID = 8402
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２
type = Explod
trigger1 = Time = 250
anim = 8405
ID = 8405
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・暗転
type = Explod
trigger1 = Time = 350
anim = 8311
ID = 8311
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 350
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 350
anim = 8406
ID = 8406
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8314
ID = 8314
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
facing = facing

[State 181, 0];フキダシ・消滅
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8224,8229)
ID = 8224
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8407
ID = 8407
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;----

[State 181, 0];黒地
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8231,8236)
ID = 8231
pos = 0,45
postype = left
sprpriority = 97
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 450
anim = 8201
ID = 8201
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;---------------------[ステート移行]
[State 196, 3]
type = ChangeState
trigger1 = time >= 460
value = 0

;---------------------------------------------------------------------------
; イントロ（対イズコXIII）
[Statedef 198]
type = S
ctrl = 0
anim = 0
velset = 0,0

;---------------------[演出]
[State 196, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = NoBarDisplay

[state a]
type = varset
triggerall = fvar(3) != 0
trigger1 = time = 0
fvar(3) = 0

[state a]
type = varadd
triggerall = fvar(3) < 0.5
trigger1 = time = [30,40]
fvar(3) = 0.05

[state a]
type = ModifyExplod
trigger1 = 1
ID = 8210
scale = fvar(3),fvar(3)

[State 181, 0];黒地
type = Explod
trigger1 = Time = 30
anim = ifelse(facing = 1,8230,8235)
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122)
postype = left
sprpriority = 95
ownpal = 1
ontop = 1
scale = 0,0.5
bindtime = -1
removetime = 420

[State 181, 0];枠
type = null ;Explod
trigger1 = Time = 30
anim = 8210
ID = 8210
pos = ifelse(facing = 1,0,319),ifelse(facing = 1,45,122) ;0,45
postype = left
sprpriority = 98
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 30
anim = 8200
ID = 8200
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 420

;----

[State 181, 0];キャラグラ１
type = Explod
trigger1 = Time = 50
anim = 8320
ID = 8300
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ
type = Explod
trigger1 = Time = 50
anim = ifelse(facing = 1,8220,8225)
ID = 8220
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１
type = Explod
trigger1 = Time = 50
anim = 8410
ID = 8400
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8321
ID = 8301
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 150
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 150
anim = 8411
ID = 8401
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２
type = Explod
trigger1 = Time = 250
anim = 8302
ID = 8312
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・復活
type = Explod
trigger1 = Time = 250
anim = ifelse(facing = 1,8223,8228)
ID = 8223
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・消滅
type = Explod
trigger1 = Time = 250
anim = 8412
ID = 8402
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２
type = Explod
trigger1 = Time = 250
anim = 8415
ID = 8405
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・暗転
type = Explod
trigger1 = Time = 350
anim = 8301
ID = 8311
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
removetime = 100
facing = facing

[State 181, 0];フキダシ・暗転
type = Explod
trigger1 = Time = 350
anim = ifelse(facing = 1,8222,8227)
ID = 8222
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

[State 181, 0];セリフ１・暗転
type = Explod
trigger1 = Time = 350
anim = 8416
ID = 8406
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1
removetime = 100

;----

[State 181, 0];キャラグラ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8304
ID = 8314
pos = ifelse(facing = 1,10,305),ifelse(facing = 1,21,96)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.25,0.25
bindtime = -1
facing = facing

[State 181, 0];フキダシ・消滅
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8224,8229)
ID = 8224
pos = ifelse(facing = 1,105,215),ifelse(facing = 1,48,190)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];セリフ２・消滅
type = Explod
trigger1 = Time = 450
anim = 8417
ID = 8407
pos = ifelse(facing = 1,125,20),ifelse(facing = 1,70,145)
postype = left
sprpriority = 100
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;----

[State 181, 0];黒地
type = Explod
trigger1 = Time = 450
anim = ifelse(facing = 1,8231,8236)
ID = 8231
pos = 0,45
postype = left
sprpriority = 97
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

[State 181, 0];大枠
type = Explod
triggerall = facing = 1
trigger1 = Time = 450
anim = 8201
ID = 8201
pos = 0,0
postype = left
sprpriority = 99
ownpal = 1
ontop = 1
scale = 0.5,0.5
bindtime = -1

;---------------------[ステート移行]
[State 196, 3]
type = ChangeState
trigger1 = time >= 460
value = 0

;---------------------------------------------------------------------------
; 挑発
[Statedef 199]
type = S
ctrl = 0
anim = 199
velset = 0,0
movetype = I
physics = N
sprpriority = 2

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 5
value = 199,0

;---------------------[演出]
[State 195, 1]
type = CtrlSet
trigger1 = Time = 90 ;33
value = 1

;---------------------[ステート移行]
[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; ハイパードライブモード発動
[Statedef 900]
type = S
ctrl = 0
anim = 900
velset = 0,0
movetype = I
physics = N
sprpriority = 1
poweradd = 0

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 19
value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 3
value = 3000,1

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 20
value = 600

;---------------------[演出]

[State 1000, ];EX
type = explod
trigger1 = animelem = 1, = 0
anim = 6110
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 5
ownpal = 1
scale = const(size.xscale),const(size.yscale)
supermovetime = 999
pausemovetime = 999

[State 1000, ];EX
type = explod
trigger1 = animelem = 1, = 0
anim = 6111
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
supermovetime = 999
pausemovetime = 999

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 4
time = 10
ampl = -5
freq = 95
phase = 95

;---------------------[ステート移行]
[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; クイック・ハイパードライブモード発動
[Statedef 901]
type = S
ctrl = 0
anim = 901
velset = 0,0
movetype = I
physics = N
sprpriority = 1
poweradd = 0

;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 19
value = 0

;---------------------[演出]

[State 1000, ];EX
type = explod
trigger1 = animelem = 1, = 0
anim = 6110
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 5
ownpal = 1
scale = const(size.xscale),const(size.yscale)
supermovetime = 999
pausemovetime = 999

[State 1000, ];EX
type = explod
trigger1 = animelem = 1, = 0
anim = 6111
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
supermovetime = 999
pausemovetime = 999

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = time = 0
value = 3000,1

;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 3
x = 8

[State 600, 1]
type = velset
trigger1 = animelem = 6
x = 0

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 20
value = 600

;---------------------[]

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[state a]
type = ctrlset
trigger1 = time = 2
value = 1

;---------------------[ステート移行]
[State 195, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; 立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 4,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3

[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 300,0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = S, NA
damage = 25+var(8)*5, 0
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
animtype = Light
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 9, 9
sparkno = s7000
sparkxy = -8, -78
hitsound = s400, 0
guard.sparkno = s7010
guardsound = s120, 0
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -1.4,-5
air.hittime = 12
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 遠距離立ち強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 210
poweradd = 0
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 8,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 201,random%2

[State 00];
type = PlaySnd
trigger1 = animelem = 5
value = 300,1

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 3, = 0
x = 8

[state a]
type = posadd
trigger1 = animelem = 4, = 0
x = 8

[state a]
type = posadd
trigger1 = animelem = 5, = 0
x = 0 ;-22

[state a]
type = posadd
trigger1 = animelem = 6, = 0
x = 30 ;7

[state a]
type = posadd
trigger1 = animelem = 7, = 0
x = 20

[state a]
type = posadd
trigger1 = animelem = 8, = 0
x = 3

[state a]
type = posadd
trigger1 = animelem = 9, = 0
x = 1

[state a]
type = posadd
trigger1 = animelem = 10, = 0
x = -1

[state a]
type = posadd
trigger1 = animelem = 11, = 0
x = -20 ;-23

[state a]
type = posadd
trigger1 = animelem = 12, = 0
x = -9 ;-19

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 7
attr = S, NA
animtype  = hard
damage    = 80 + var(8)*20
priority = 5, Hit
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7001
sparkxy = -12,-79
hitsound   = s400,2
guardsound = s120,0
guard.sparkno = s7011
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -10.5
air.velocity = -3.2,-5
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち強パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 215
poweradd = 0
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 7,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 201,random%2

[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 300,1

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = 40 + var(8)*10
priority = 5, Hit
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -24,-81
hitsound   = s410,1
guardsound = s120,0
guard.sparkno = s7011
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0
air.velocity = -2.5,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 200
yaccel = 0.45

[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 5
attr = S, NA
animtype  = hard
damage    = 70 + var(8)*20
priority = 5, Hit
getpower = 91,91
givepower = 60+var(29)*5,55+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -27,-92
hitsound   = s410,1
guardsound = s120,0
guard.sparkno = s7011
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -10.5
air.velocity = -3.2,-5
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 230
poweradd = 0
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 5,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3

[State 00];
type = PlaySnd
trigger1 = animelem = 3
value = 300,0

;---------------------[攻撃]
[State 230, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 4
attr = S, NA
animtype  = light
damage    = 30 + var(8)*5
priority = 4, Hit
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
guardflag = L
pausetime = 9,9
sparkno = s7000
sparkxy = -21,-28
hitsound   = s400,1
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -2.5,-5
ID = 200
yaccel = 0.45


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 遠距離立ち強キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 240
poweradd = 0
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 6,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 201,random%2

[State 00];
type = PlaySnd
trigger1 = animelem = 3
value = 300,2

;---------------------[移動]

;---------------------[攻撃]
[State 240, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 5
attr = S, NA
animtype  = hard
damage    = 70 + var(8)*120
priority = 5, Hit
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7001
sparkxy = -24,-86
hitsound   = s400,3
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -12
air.velocity = -3,-5
ID = 200
yaccel = 0.45


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 近距離立ち強キック
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 245
poweradd = 0
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 7,>=0
Value = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 3
value = 201,random%2

[State 00];
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 6
value = 300,2

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 6
x = 4

[state a]
type = posadd
trigger1 = animelem = 8
x = 2

;---------------------[攻撃]
[State 240, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = 40 + var(8)*10
priority = 5, Hit
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7001
sparkxy = -15,-69
hitsound   = s400,3
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0
air.velocity = -2.5,-5
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 200
yaccel = 0.45

[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 6
attr = S, NA
animtype  = hard
damage    = 40 + var(8)*10
priority = 5, Hit
getpower = 91,91
givepower = 60+var(29)*5,55+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7001
sparkxy = -27,-68
hitsound   = s400,3
guardsound = s120,0
guard.sparkno = s7011
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9.5
air.velocity = -3.2,-5
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ストライクアーチ
[Statedef 250]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = ifelse(var(29) >= 1,252,250)
poweradd = 0
velset = 0,0
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 9,>=0
Value = 0

;---------------------[]

[State -2]
Type = statetypeset
Trigger1 = AnimElem = 3,=0
value = A

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 3,=0
Trigger2 = AnimElem = 4,=0
x = 10
y = -10

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 5,=0
Trigger2 = AnimElem = 6,=0
x = 10
y = -5

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 7,=0
Trigger2 = AnimElem = 8,=0
x = 10
y = 10

[State -2]
Type = statetypeset
Trigger1 = AnimElem = 9,=0
value = S

[State -2]
Type = posset
Trigger1 = AnimElem = 9,=0
y = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 5
value = 201,2

[State 00];
type = PlaySnd
trigger1 = animelem = 6
value = 250,0

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 8
attr = A, NA
animtype  = up
damage    = 70 + var(8)*20
priority = 5, Hit
getpower = 107,107
givepower = 70+var(29)*5,65+var(29)*5
hitflag = MAF
guardflag = H
pausetime = 12,12
sparkno = s7002
sparkxy = -20,-68
hitsound   = s400,5
guardsound = s120,0
guard.sparkno = s7011
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,20
guard.velocity = -10.5
air.velocity = -3.5,20
yaccel = 0.45
fall = 1
fall.recover = 0

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ストライクアーチ(キャンセル版)
[Statedef 255]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 255
poweradd = 0
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 8,>=0
Value = 0

;---------------------[]

[State -2]
Type = statetypeset
Trigger1 = AnimElem = 3,=0
value = A

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 3,=0
Trigger2 = AnimElem = 4,=0
x = 10
y = -5

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 5,=0
Trigger2 = AnimElem = 6,=0
x = 10
y = -5

[State -2]
Type = PosAdd
Trigger1 = AnimElem = 7,=0
x = 10
y = 10

[State -2]
Type = statetypeset
Trigger1 = AnimElem = 8,=0
value = S

[State -2]
Type = posset
Trigger1 = AnimElem = 8,=0
y = 0

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 5
value = 201,2

[State 00];
type = PlaySnd
trigger1 = animelem = 6
value = 250,0

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 7
attr = A, NA
animtype  = hard
damage    = 50 + var(8)*10
priority = 5, Hit
getpower = 60,60
givepower = 40+var(29)*5,35+var(29)*5
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = s7002
sparkxy = -20,-68
hitsound   = s400,5
guardsound = s120,0
guard.sparkno = s7011
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,20
yaccel = 0.45
air.fall = 0
fall.recover = 0
yaccel = 0.45

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 0


[State -2]
Type = AttackDist
Trigger1 = AnimElem = 11,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 3

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 201,2

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 6
x = 8

[state a]
type = VelSet
trigger1 = animelem = 8
x = 16

[state a]
type = VelSet
trigger1 = animelem = 11
x = 0

[state a]
type = VelMul
trigger1 = animelem = 8, >= 0
trigger1 = animelem = 11, < 0
x = 0.95

;---------------------[攻撃]
[State 240, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 8
attr = S, NA
animtype  = high
damage    = 75+var(8)*20
priority = 6, Hit
getpower = 122,122
givepower = 80+var(29)*5,75+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7002
sparkxy = -15,-69
hitsound   = s400,6
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6,-6.8
air.velocity = -6,-6.8
guard.velocity = -18
yaccel = 0.45
fall = 1
fall.recover = 0
air.fall = 1
ID = 290

;---------------------[ステート移行]
[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ガードキャンセルふっ飛ばし攻撃
[Statedef 291]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= -1000
ctrl = 0
velset = 0,0
anim = 295
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 7,>=0
Value = 0

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = 1
value = SCA

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 3

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 201,2

;---------------------[エフェクト]
[State a]
type = EnvColor
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

;---------------------[攻撃]
[State 240, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = Time = 0
attr = S, NA
animtype  = diagup
damage    = 10
priority = 6, Hit
getpower = 0,0
guardflag = M
pausetime = 12,12
sparkno = s7002
sparkxy = -15,-69
hitsound   = s400,6
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
guard.velocity = -11
fall = 1
fall.recover = 0
kill = ifelse(var(8),1,0)
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;屈み弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 5,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3


;---------------------[攻撃]
[State 400, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 4
attr = C, NA
damage    = 25 + var(8)*5
priority = 4, Hit
animtype  = Light
hitflag = MAF
guardflag = M
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
pausetime = 9,9
sparkno = s7000
sparkxy = -10,-51
hitsound   = s400,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -2.5,-5
ID = 200
yaccel = 0.45


;---------------------[ステート移行]
[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み強パンチ
[Statedef 410]
type    = C
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 0


[State -2]
Type = AttackDist
Trigger1 = AnimElem = 5,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 201,random%2

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 2, = 0
x = 12

[state a]
type = posadd
trigger1 = animelem = 3, = 0
x = 8

[state a]
type = posadd
trigger1 = animelem = 4, = 0
x = 2

[state a]
type = posadd
trigger1 = animelem = 6, = 0
x = -3

[state a]
type = posadd
trigger1 = animelem = 7, = 0
x = -7

[state a]
type = posadd
trigger1 = animelem = 11, = 0
x = -9

[state a]
type = posadd
trigger1 = animelem = 12, = 0
x = -8

;---------------------[攻撃]
[State 410, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = C, NA
damage    = 70+var(8)*20
priority = 5, Hit
animtype  = hard
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
sparkno = s7001
sparkxy = -23,-80
hitsound   = s400,2
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -11
air.velocity = -2,-5
fall = 0
fall.recover = 0
ID = 200
yaccel = 0.45


;---------------------[ステート移行]
[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 3,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3

;---------------------[攻撃]
[State 430, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 2
attr = C, NA
damage    = 30+var(8)*5
priority = 4, Hit
animtype  = Light
hitflag = M
guardflag = L
pausetime = 9,9
sparkno = s7000
sparkxy = -10,-11
hitsound   = s400,1
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
guard.sparkno = s7010
guardsound = s120,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -7
air.velocity = -2,-5
ID = 200
yaccel = 0.45


;---------------------[ステート移行]
[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み強キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 440
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 5,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 300, 3

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 201,random%2

;---------------------[攻撃]
[State 440, 3]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 4
attr = C, NA
damage    = 80+var(8)*20
priority = 5, Hit
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = s7001
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
sparkxy = -15,-29
hitsound   = s400,3
guardsound = s120,0
guard.sparkno = s7011
ground.type = Trip
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1.5,-5
air.velocity = -4,-5
guard.velocity = -11
fall = 1
fall.recover = 0
ID = 200
yaccel = 0.45

;---------------------[ステート移行]
[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;空中弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 6,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 300, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3

;---------------------[攻撃]

[State 600, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 4
attr = A, NA
damage    = ifelse(var(16) = 1,40,45)+var(8)*10
priority = 4, Hit
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
guardflag = H
pausetime = 9,9
sparkno = s7000
sparkxy = -10,-50
hitsound   = s400,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = high
ground.slidetime = ifelse(var(16) = 1,10,12)
ground.hittime  = ifelse(var(16) = 1,10,12)
ground.velocity = -4
air.velocity = -1.3,-5
ID = 200
yaccel = 0.45


;---------------------------------------------------------------------------
;空中強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 2

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 3,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%2

;---------------------[攻撃]

[State 610, 3]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 2
attr = A, NA
damage = 70+var(8)*20
priority = 5, Hit
guardflag = H
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
pausetime = 12,12
sparkno = s7006
sparkxy = -16,-52
hitsound   = s410,1
guard.sparkno = s7011
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = ifelse(var(16) = 1,12,18)
ground.hittime  = ifelse(var(16) = 1,12,18)
ground.velocity = -10
air.velocity = -3,-5
ID = 200
yaccel = 0.45



;---------------------------------------------------------------------------
;空中弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 5,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%3

;---------------------[攻撃]
[State 630, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = A, NA
damage = ifelse(var(16) = 1,40,45)+var(8)*10
priority = 4, Hit
getpower = 32,32
givepower = 20+var(29)*5,15+var(29)*5
guardflag = H
pausetime = 9,9
sparkno = s7000
sparkxy = -11,-60
hitsound   = s400,1
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = ifelse(var(16) = 1,10,12)
ground.hittime  = ifelse(var(16) = 1,10,12)
ground.velocity = -4
air.velocity = -2,-4.5
ID = 200
yaccel = 0.45



;---------------------------------------------------------------------------
;空中強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 640
sprpriority = 1

[State -2]
Type = AttackDist
Trigger1 = vel x = 0 && var(16) <= 0
Trigger1 = AnimElem = 5,>=0
Value = 0

[State -2]
Type = AttackDist
Trigger1 = !(vel x = 0 && var(16) <= 0)
Trigger1 = AnimElem = 5,>=0
Value = 0

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = !(vel x = 0 && var(16) <= 0)
value = 645

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 3

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 200,random%2

;---------------------[攻撃]
[State 640, 3]
type = HitDef
triggerall = var(1) = 0
trigger1 = anim = 640
trigger1 = animelem = 2
attr = A, NA
damage    = 70+var(8)*20
priority = 5, Hit
guardflag = H
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
pausetime = 12,12
sparkno = s7001
sparkxy = -12,-42
hitsound   = s400,3
guard.sparkno = s7011
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = ifelse(var(16) = 1,12,18)
ground.hittime  = ifelse(var(16) = 1,12,18)
ground.velocity = -5
air.velocity = -3,-6
ID = 200
yaccel = 0.45


[State 640, 3]
type = HitDef
triggerall = var(1) = 0
trigger1 = anim = 645
trigger1 = animelem = 2
attr = A, NA
damage    = 70+var(8)*20
priority = 5, Hit
guardflag = H
getpower = 63,63
givepower = 50+var(29)*5,45+var(29)*5
pausetime = 12,12
sparkno = s7001
sparkxy = -12,-56
hitsound   = s400,3
guard.sparkno = s7011
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = ifelse(var(16) = 1,12,18)
ground.hittime  = ifelse(var(16) = 1,12,18)
ground.velocity = -5
air.velocity = -3,-6
ID = 200
yaccel = 0.45


;---------------------------------------------------------------------------
;空中ふっ飛ばし攻撃
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 690
sprpriority = 2

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 8,>=0
Value = 0

;---------------------[効果音]
[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 300, 3

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 201,2

;---------------------[攻撃]
[State 240, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 5
attr = A, NA
animtype  = hard
damage    = ifelse(var(16) = 1,80,90)+var(8)*20
priority = 99, Hit
getpower = 122,122
givepower = 80+var(29)*5,75+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7002
sparkxy = -15,-54
hitsound   = s400,6
guard.sparkno = s7011
guardsound = s120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 290


;---------------------------------------------------------------------------
;緊急回避前
[Statedef 700]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = 1

;---------------------[演出]
[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = SCA

[State 1];無敵の状態を作る
type = NotHitBy
triggerall = animelem = 6,<0
trigger1 = prevstateno != 150
trigger1 = prevstateno != 151
value = SCA

[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[エフェクト]
[State a]
type = EnvColor
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

;---------------------[効果音]
[State 600, 1]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = Time = 1
value = 700, 0

;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0


[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 3
x = ifelse(prevstateno = 100,6,5)

[State 600, 1]
type = velset
trigger1 = animelem = 5
x = 0


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;緊急回避後
[Statedef 701]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
anim = 701
velset = 0,0
sprpriority = 1

;---------------------[演出]
[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = SCA

[State 1];無敵の状態を作る
type = NotHitBy
triggerall = animelem = 5,<0
trigger1 = prevstateno != 150
trigger1 = prevstateno != 151
value = SCA

[state a]
type = playerpush
trigger1 = 1
value = 0


;---------------------[エフェクト]
[State a]
type = EnvColor
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

;---------------------[効果音]
[State 600, 1]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = Time = 1
value = 700, 0

;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0


[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 2
x = -5

[State 600, 1]
type = velset
trigger1 = animelem = 4
x = 0


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;ダウン回避
[Statedef 702]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
anim = 702
velset = 0,0
sprpriority = 1

;---------------------[演出]
[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[効果音]
[State 600, 1];しっ
type = PlaySnd
trigger1 = Time = 1
value = 702, 0

;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = -12

[State 600, 1]
type = velset
trigger1 = animelem = 5
x = 0

[State 600, 1]
type = velmul
trigger1 = 1
x = 0.9


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;レオナクラッシュ
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

;---------------------[攻撃]
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
Trigger1 = Enemynear,anim != 40
attr = S, NT
hitflag = M-
priority = 1, Miss 
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 805
p2stateno = 810
fall = 1
nochainID = 600,9999

;---------------------[ステート移行]
[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 215

;---------------------------------------------------------------------------
;レオナクラッシュ・掴み
[Statedef 805]
type    = S
movetype= A
physics = N
anim = 805
juggle  = 0
sprpriority = 1

;---------------------[サウンド]
[State 810, Grab Sound];掴み
type = PlaySnd
trigger1 = time = 1
value = 420, 0

;---------------------[エフェクト]
[State explod];掴み
type = Explod
trigger1 = time = 1
anim = 7080
id = 3000
sprpriority = 5
postype = p1
pos = 45,-60
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

;---------------------[移動、速度]
;---------------------[相手制御]

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1, >= 0
value = 30,0

;---------------------[演出]
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 75,0

[State 10000, 1]
type = ChangeState
trigger1 = Prevstateno = 800
trigger1 = (Target,Command = "y")
trigger1 = (Target,Command = "holdfwd") || (Target,Command = "holdback")
trigger2 = Prevstateno != 800
trigger2 = (Target,Command = "b")
trigger2 = (Target,Command = "holdfwd") || (Target,Command = "holdback")
value = 806

;---------------------[ステート移行]
[State 821, 3] 
type = changeState
trigger1 = time >= 9
value = ifelse(prevstateno = 800,801,821)
ctrl = 0

;---------------------------------------------------------------------------
;レオナクラッシュ・投げはずされ
[Statedef 806]
type    = S
movetype= A
physics = N
anim = 5945
juggle  = 0
sprpriority = 1

;---------------------[サウンド]

[State 106, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 400,4

[State 106, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 295,0

[State 106, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 301,1

;---------------------[エフェクト]
[State explod];はずし
type = Explod
trigger1 = time = 7
anim = 7082
id = 3000
sprpriority = 5
postype = p1
pos = 45,-60
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

;---------------------[相手制御]

[State 2, targetstate]
type = targetstate
trigger1 = time = 0
value = 899

;---------------------[演出]

[State 10000, 1]
type = VelSet
trigger1 = time = 0
x = 0
0

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0
0
;---------------------[ステート移行]
[State 821, 3] 
type = changeState
trigger1 = time >= 23
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)アイスコフィン・投げ抜け
[Statedef 899]
type = S
movetype= I
physics = N
sprpriority = 1
facing = enemy,facing

[State 895,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5940)
trigger1 = authorname = "Beppu"
trigger2 = authorname = "P-tan"
trigger2 = name = "Kula Diamond"
value = 5940

[State 895,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != 5940
value = 5007

;---------------------[演出]

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------[演出]

[State 10000, 1]
type = VelSet
trigger1 = time = 1
x = 0

[State 10000, 1]
type = VelSet
trigger1 = time = 7
x = -8

[State 10000, 1]
type = VelMul
trigger1 = 1
x = 0.95

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = time = 18
x = 0

;---------------------[演出]

[State 851, end]
type = SelfState
trigger1 = time >= 23
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;レオナクラッシュ・投げ
[Statedef 801]
type    = S
movetype= A
physics = N
anim = 801
juggle  = 0
sprpriority = 4

;---------------------[サウンド]
[State 810, Grab Sound];アップルジュース
type = PlaySnd
trigger1 = animelem = 4
value = 801, 0

[State 810, Grab Sound];刺し
type = PlaySnd
trigger1 = animelem = 7
value = 800, 0

[State 810, Grab Sound]
type = PlaySnd
trigger1 = animelem = 12
value = 410, 1

;---------------------[エフェクト]
[State explod];オーラ
type = Explod
trigger1 = time = 0
anim = 802
id = 802
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

[State explod];ヒット
type = Explod
trigger1 = animelem = 7
anim = 803
id = 803
sprpriority = 5
postype = p1
pos = 40,-75
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

[State explod];ヒットスパーク
type = Explod
trigger1 = animelem = 12
anim = 7006
id = 3000
sprpriority = 10
postype = p1
pos = 40,-75
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State explod];血
type = Explod
trigger1 = animelem = 12
anim = 804
id = 804
sprpriority = 10
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

;---------------------[相手制御]
[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
pos = 36,0

[State 801, 2]
type = Targetlifeadd
trigger1 = animelem = 12
value = -floor(100*const(data.attack)/100)

;---------------------[演出]
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 75,0

;---------------------[ステート移行]
[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(ENEMY)レオナクラッシュ・掴まれ
[Statedef 810]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[state a]
type = turn
trigger1 = Enemynear,stateno = 821
trigger1 = Enemynear,time = 1

;---------------------[演出]
[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 810

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = animtime = 0
value = 811

;---------------------------------------------------------------------------
;(ENEMY)レオナクラッシュ・吹き飛び
[Statedef 811]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

;---------------------[演出]
[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------[速度]
[state a];28
type = velset
trigger1 = time = 1
x = -9
y = -6

[state a]
type = velmul
trigger1 = time >= 1
trigger1 = vel x <= -4
x = 0.95

[State 821, 1]
type = VelAdd
Trigger1 = time >= 1
y = .48

;---------------------[ステート移行]
[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;レオナクラッシュ(後ろ)
[Statedef 820]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

;---------------------[攻撃]
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
Trigger1 = Enemynear,anim != 40
attr = S, NT
hitflag = M-
priority = 1, Miss 
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 805
p2stateno = 810
fall = 1
nochainID = 600,9999

;---------------------[ステート移行]
[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 245

;---------------------------------------------------------------------------
;レオナクラッシュ・投げ(後ろ)
[Statedef 821]
type    = S
movetype= A
physics = N
anim = 801
juggle  = 0
sprpriority = 4

[state a]
type = turn
trigger1 = time = 0

;---------------------[サウンド]
[State 810, Grab Sound];アップルジュース
type = PlaySnd
trigger1 = animelem = 4
value = 801, 0

[State 810, Grab Sound];刺し
type = PlaySnd
trigger1 = animelem = 7
value = 800, 0

[State 810, Grab Sound]
type = PlaySnd
trigger1 = animelem = 12
value = 410, 1

;---------------------[エフェクト]
[State explod];オーラ
type = Explod
trigger1 = time = 0
anim = 802
id = 802
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

[State explod];ヒット
type = Explod
trigger1 = animelem = 7
anim = 803
id = 803
sprpriority = 5
postype = p1
pos = 40,-75
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

[State explod];ヒットスパーク
type = Explod
trigger1 = animelem = 12
anim = 7006
id = 3000
sprpriority = 10
postype = p1
pos = 40,-75
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State explod];血
type = Explod
trigger1 = animelem = 12
anim = 804
id = 804
sprpriority = 10
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = const(size.xscale),const(size.yscale)

;---------------------[相手制御]
[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
pos = 36,0

[State 801, 2]
type = Targetlifeadd
trigger1 = animelem = 12
value = -floor(100*const(data.attack)/100)

;---------------------[演出]
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 75,0

;---------------------[ステート移行]
[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ムーンスラッシャー
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 120
velset = 0,0
anim = 1000
sprpriority = 1
ctrl = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 6,>=0
Value = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 30,0

;---------------------[ドライブキャンセル]

[State 1]
type = removeexplod
triggerall = time = 0
trigger1 = Numexplod(7910)
ID = 7910

[State 6000];Drive Canncel
type = Explod
triggerall = teamside = 1
triggerall = var(19) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
anim = ifelse(teamside = 1,7910,7911)
id = 7910
sprpriority = 9
postype = left
pos = ifelse(teamside = 1,65,-70),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];Drive Canncel
type = Explod
triggerall = teamside != 1
triggerall = var(19) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
anim = ifelse(teamside = 1,7910,7911)
id = 7910
sprpriority = 9
postype = right
pos = ifelse(teamside = 1,65,-70),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];HD Canncel
type = Explod
triggerall = teamside = 1
triggerall = var(20) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
anim = ifelse(teamside = 1,7920,7921)
id = 7910
sprpriority = 9
postype = left
pos = ifelse(teamside = 1,55,-60),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];HD Canncel
type = Explod
triggerall = teamside != 1
triggerall = var(20) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
anim = ifelse(teamside = 1,7920,7921)
id = 7910
sprpriority = 9
postype = right
pos = ifelse(teamside = 1,55,-60),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State a];点滅
type = palfx
triggerall = var(20) <= 0
triggerall = time <= 10
triggerall = gametime %2=0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
time = 1
add = 0,0,180
color = 1
ignorehitpause = 1

[State a];ドライブゲージ回復停止時間
type = varset
triggerall = var(19) > 0
triggerall = time = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
v = 21
value = 180

[State a];ドライブゲージゲージ
type = varadd
triggerall = var(19) > 0
triggerall = time = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
v = 19
value = -500

[State a];ハイパードライブゲージゲージ
type = varadd
triggerall = var(20) > 0
triggerall = time = 0
trigger1 = prevstateno = 1110
trigger2 = prevstateno = 2110
v = 20
value = -60

;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
v = 6
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "x" && var(59) <= 0
trigger2 = var(58) = 1
trigger3 = fvar(11) = 1 && var(59) <= 0
v = 5
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "y" && var(59) <= 0
trigger2 = var(58) = 2
trigger3 = fvar(11) = 2 && var(59) <= 0
v = 5
value = 1

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1001

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelem = 2
value = 1000, 0

[State a];
type = PlaySnd
trigger1 = animelem = 2
value = 1000,ifelse(var(5) <= 0,1,2)

;---------------------[エフェクト]
[State explod];斬り
type = Explod
trigger1 = var(5) <= 0
trigger1 = animelem = 1, = 3
trigger2 = var(5) >= 1
trigger2 = animelem = 1, = 5
anim = 1010
id = 3000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State explod];斬り
type = Explod
trigger1 = var(5) <= 0
trigger1 = animelem = 1, = 3
trigger2 = var(5) >= 1
trigger2 = animelem = 1, = 5
anim = 1011
id = 3000
sprpriority = 4
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 2, = 0
x = 8

[state a]
type = posadd
trigger1 = animelem = 3, = 0
x = ifelse(var(5) <= 0,2,12)

[state a]
type = posadd
trigger1 = animelem = 4, = 0
x = ifelse(var(5) <= 0,16,26)

[state a]
type = posadd
trigger1 = animelem = 11, = 0
x = -2

[state a]
type = posadd
trigger1 = animelem = 12, = 0
x = -12

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 80 + var(8)*20, 8
priority = 8, Hit
getpower = 124,124
givepower = 80+var(29)*5,75+var(29)*5
guardflag = M
pausetime = 5,5
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5,-7.5
guard.velocity = ifelse(var(29) <= 0,-5,-2)
air.velocity = -5,-6.5 ;7
yaccel = 0.5
fall = 1
fall.recover = 0


[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 5 && movecontact = 0
attr = S, SA
animtype  = hard
damage    = 60 + var(8)*20, 6
priority = 8, Hit
getpower = 124,124
givepower = 80+var(29)*5,75+var(29)*5
guardflag = M
pausetime = 5,5
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5,-7.5
guard.velocity = ifelse(var(29) <= 0,-5,-2)
air.velocity = -5,-6.5 ;7
yaccel = 0.5
fall = 1
fall.recover = 0


;---------------------[立ちステートに戻る]

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; グランドセイバー
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 140
velset = 0,0
anim = 1100
sprpriority = 1
ctrl = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 30,0

;---------------------[ドライブキャンセル]

[State 1]
type = removeexplod
triggerall = time = 0
trigger1 = Numexplod(7910)
ID = 7910

[State 6000];Drive Canncel
type = Explod
triggerall = teamside = 1
triggerall = var(19) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
anim = ifelse(teamside = 1,7910,7911)
id = 7910
sprpriority = 9
postype = left
pos = ifelse(teamside = 1,65,-70),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];Drive Canncel
type = Explod
triggerall = teamside != 1
triggerall = var(19) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
anim = ifelse(teamside = 1,7910,7911)
id = 7910
sprpriority = 9
postype = right
pos = ifelse(teamside = 1,65,-70),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];HD Canncel
type = Explod
triggerall = teamside = 1
triggerall = var(20) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
anim = ifelse(teamside = 1,7920,7921)
id = 7910
sprpriority = 9
postype = left
pos = ifelse(teamside = 1,55,-60),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];HD Canncel
type = Explod
triggerall = teamside != 1
triggerall = var(20) > 0
triggerall = time = 0
triggerall = Numexplod(7910) = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
anim = ifelse(teamside = 1,7920,7921)
id = 7910
sprpriority = 9
postype = right
pos = ifelse(teamside = 1,55,-60),65
ontop = 1
bindtime = -1
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State a];ドライブゲージ回復停止時間
type = varset
triggerall = var(19) > 0
triggerall = time = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
v = 21
value = 180

[State a];点滅
type = palfx
triggerall = var(20) <= 0
triggerall = time <= 10
triggerall = gametime %2=0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
time = 1
add = 0,0,180
color = 1
ignorehitpause = 1

[State a];ドライブゲージゲージ
type = varadd
triggerall = var(19) > 0
triggerall = time = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
v = 19
value = -500

[State a];ハイパードライブゲージゲージ
type = varadd
triggerall = var(20) > 0
triggerall = time = 0
trigger1 = prevstateno = 1000
trigger2 = prevstateno = 2000
v = 20
value = -60

;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "a" && var(59) <= 0
trigger2 = var(58) = 1
trigger3 = fvar(11) = 1 && var(59) <= 0
v = 5
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "b" && var(59) <= 0
trigger2 = var(58) = 2
trigger3 = fvar(11) = 2 && var(59) <= 0
v = 5
value = 1

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1101

;---------------------[無敵]
;---------------------[サウンド]
[State a];ダッシュ
type = PlaySnd
trigger1 = animelem = 4, = 4
value = 100, 0
channel = 5

;---------------------[移動]
[state a]
type = velset
trigger1 = animelem = 4, = 4
x = ifelse(var(5) >= 1,12,10)

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = var(5) = 0
trigger1 = time = 24
trigger2 = var(5) = 1
trigger2 = time = 34
value = 1105

[state a]
type = changestate
triggerall = animelem = 5,>= 0
triggerall = (var(5) <= 0 && (p2bodydist X <= 130 || p2dist x = [-320,0])) || (var(5) >= 1 && (p2bodydist X <= 160 || p2dist x = [-320,0]))
trigger1 = EnemyNear(Var(53)),statetype!=A
;trigger2 = (EnemyNear(Var(53)),Pos Y>=(0-(EnemyNear(Var(53)),Vel Y*16)-(EnemyNear(Var(53)),const(movement.yaccel)*136)))
;trigger3 = (EnemyNear(Var(53)),Pos Y>=(-10-(EnemyNear(Var(53)),Vel Y*12)-(EnemyNear(Var(53)),const(movement.yaccel)*78)))
;trigger4 = (EnemyNear(Var(53)),Pos Y>=(-10-(EnemyNear(Var(53)),Vel Y*15)-(EnemyNear(Var(53)),const(movement.yaccel)*120)))
trigger2 = EnemyNear(Var(53)),Pos Y >= (0 - (EnemyNear(Var(53)),Vel Y * 16) - (ifelse(fvar(39) <= 0,EnemyNear(Var(53)),const(movement.yaccel),fvar(39)) * 136))
trigger3 = EnemyNear(Var(53)),Pos Y >= (-35 - (EnemyNear(Var(53)),Vel Y * 12) - (ifelse(fvar(39) <= 0,EnemyNear(Var(53)),const(movement.yaccel),fvar(39)) * 78))
trigger4 = EnemyNear(Var(53)),Pos Y >= (-35 - (EnemyNear(Var(53)),Vel Y * 15) - (ifelse(fvar(39) <= 0,EnemyNear(Var(53)),const(movement.yaccel),fvar(39)) * 120))
value = 1110

;---------------------------------------------------------------------------
; グランドセイバー・ストップ
[Statedef 1105]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1105
sprpriority = 1
ctrl = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 1,>=0
Value = 0

;---------------------[移動]
[state a]
type = velset
trigger1 = animelem = 1, = 0
x = ifelse(var(5) >= 1,8,6)

[state a]
type = velset
trigger1 = animelem = 4, = 0
x = 0

[state a]
type = velmul
trigger1 = animelem = 4, < 0
x = 0.9

;---------------------[コマンド判定]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1106

;---------------------[エフェクト]
[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; グランドセイバー・攻撃
[Statedef 1110]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 9,0
anim = 1110
sprpriority = 1
ctrl = 0

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = AnimElem = 6,< 0
edge = 30,0

;---------------------[コマンド判定]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1111

;---------------------[サウンド]
[State a];斬る
type = PlaySnd
trigger1 = animelem = 2
value = 1100, 0

;---------------------[移動]
[state a]
type = velset
trigger1 = animelem = 1, = 0
x = ifelse(var(5) >= 1,14,12)

[state a]
type = velset
trigger1 = animelem = 9, = 0
x = 0

[state a]
type = velmul
trigger1 = animelem = 9, < 0
x = 0.95

;---------------------[エフェクト]
[State explod];斬り
type = Explod
trigger1 = animelem = 1, = 5
anim = 1150
id = 3000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State explod];斬り
type = Explod
trigger1 = animelem = 1, = 0
anim = 1151
id = 3000
sprpriority = 4
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

;---------------------[演出]
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 32,0


;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
triggerall = var(5) <= 0
trigger1 = animelem = 5
attr = S, SA
animtype  = hard
damage    = 70 + var(8)*20, 14
priority = 8, Hit
getpower = 62,62
givepower = 50+var(29)*5,45+var(29)*5
hitflag = MAF ;MALD
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = ifelse(var(29) <= 0,14,12)
ground.hittime  = ifelse(var(29) <= 0,14,12)
ground.velocity = -4, -8.5 ;-7.4
air.velocity = -4.5, -8.5 ;-7.4
yaccel = 0.47
fall = 1
fall.recover = 0

[State 210, 2]
type = HitDef
triggerall = var(1) = 0
triggerall = var(5) >= 1
trigger1 = animelem = 5
attr = S, SA
animtype  = hard
damage    = 70 + var(8)*20, 14
priority = 8, Hit
getpower = 62,62
givepower = 50+var(29)*5,45+var(29)*5
hitflag = MAF ;MALD
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = ifelse(var(29) <= 0,16,15)
ground.hittime  = ifelse(var(29) <= 0,16,15)
ground.velocity = -4, -8.5 ;-7.4
air.velocity = -4.5, -8.5 ;-7.4
yaccel = 0.47
fall = 1
fall.recover = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; Xキャリバー弱
[Statedef 1200]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 140
velset = 0,0
anim = 1200
sprpriority = 1
ctrl = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 8,>=0
Trigger1 = numhelper(1300) = 0
Value = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 0

[State a];
type = PlaySnd
trigger1 = animelem = 4
value = 1200, 0

;---------------------[エフェクト]
[State explod];X
type = Explod
trigger1 = animelem = 6, = 0
anim = 1210
id = 1210
sprpriority = 3
postype = p1
pos = 0,0
vel = 6,6
bindtime = 1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
anim = 1201
id = 3000
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;---------------------[移動]
[state a]
type = velset
trigger1 = animelem = 8
x = -3
y = -7

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.47

;---------------------[ヘルパー]
[state a];攻撃
type = Helper
trigger1 = animelem = 6, = 0
id = 1300
name = "zannzo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1220
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 1205

;---------------------------------------------------------------------------
; Xキャリバー弱・着地
[Statedef 1205]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1205
sprpriority = 1
ctrl = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 1,>=0
Value = 0

;---------------------[サウンド]
[State a];着地
type = PlaySnd
trigger1 = time = 0
value = 41,0

;---------------------[エフェクト]
;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(HELPER)攻撃用ヘルパー
[Statedef 1220]
type = A
ctrl = 0
anim = 1220
velset = 6,6
movetype = A
physics = N
;sprpriority = 2

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1221

;---------------------[攻撃]
[State 210, 2]
type = HitDef
trigger1 = animelem = 1, = 1
attr = A, SP
animtype  = hard
damage    = floor(60*((100.0 - (root,var(14) * 5.0)) / 100.0)) + var(8)*15, 6
priority = 8, Hit
getpower = 109,109
givepower = 80+var(29)*5,75+var(29)*5
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4,-7.2
air.velocity = -4.5,-7.2
yaccel = 0.47
fall = 1
fall.recover = 0
ID = 9999
nochainID = 9999

;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0
trigger2 = movecontact
trigger3 = movetype = H

;---------------------------------------------------------------------------
;(HELPER)消滅
[Statedef 1221]
type = A
ctrl = 0
anim = 1221
velset = 0,0
movetype = A
physics = N
sprpriority = 2

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 0


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;Xキャリバー強
[Statedef 1250]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 140
velset = 0,0
anim = 1250
sprpriority = 1
ctrl = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelem = 5, = 0
value = 1000, 0

[State a];
type = PlaySnd
trigger1 = animelem = 4, = 0
value = 1200, 0

;---------------------[移動]

[state a]
type = velset
trigger1 = animelem = 6, = 0
x = 10
y = 9

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 6, = 0
attr = S, SA
animtype  = hard
damage    = 60 + var(8)*15, 6
priority = 8, Hit
getpower = 124,124
givepower = 80+var(29)*5,75+var(29)*5
guardflag = M
pausetime = 12,12
sparkno = s7006
sparkxy = -16,-59
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4,-9 ;9.5
air.velocity = -4.5,-8.5
yaccel = 0.5
fall = 1
fall.recover = 0

;---------------------[エフェクト]
[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
anim = 1261
id = 1260
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State explod];X
type = Explod
trigger1 = animelem = 5, = 0
anim = 1260
id = 1260
sprpriority = 3
postype = p1
pos = 0,0
bindtime = -1
removetime = -1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
ignorehitpause = 0
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 1255

;---------------------------------------------------------------------------
; Xキャリバー・着地
[Statedef 1255]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1255
sprpriority = 1
ctrl = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 1260

;---------------------[移動]
[state a]
type = velset
trigger1 = time = 1
x = 8

[state a]
type = velmul
trigger1 = time >= 1
x = 0.8

[state a]
type = velset
trigger1 = time = 20
x = 0

[State -2]
Type = AttackDist
Trigger1 = AnimElem = 1,>=0
Value = 0

;---------------------[サウンド]
[State a];着地
type = PlaySnd
trigger1 = time = 0
value = 41,0

;---------------------[エフェクト]
;---------------------[移動]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ボルテックランチャー弱
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 80
velset = 0,0
anim = 1300
sprpriority = 1
ctrl = 0

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;---------------------[コマンド判定]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "x" && var(59) <= 0
trigger2 = var(58) = 1
trigger3 = fvar(11) = 1 && var(59) <= 0
v = 5
value = 0

[state a]
type = varset
triggerall = time = 0
trigger1 = command = "y" && var(59) <= 0
trigger2 = var(58) = 2
trigger3 = fvar(11) = 2 && var(59) <= 0
v = 5
value = 1

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1301

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelemtime(3) = 6
trigger1 = anim = 1300
trigger2 = animelemtime(3) = 4
trigger2 = anim = 1301
value = 1300,ifelse(var(5) <= 0,2,3)
channel = 6

[State a];
type = PlaySnd
trigger1 = animelemtime(3) = 6
trigger1 = anim = 1300
trigger2 = animelemtime(3) = 4
trigger2 = anim = 1301
value = 1300, 1

[state a]
type = null ;stopsnd
trigger1 = animtime = 0
channel = 6

;---------------------[エフェクト]
[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
trigger1 = anim = 1300
anim = 1310
id = 1300
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
vel = 0.5, 0

[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
trigger1 = anim = 1301
anim = 1311
id = 1300
sprpriority = 3
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)
vel = 1, 0

;---------------------[ヘルパー]
[state a];攻撃
type = Helper
trigger1 = animelem = 5, = 0
trigger1 = anim = 1300
id = 1300
name = "zannzo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1315
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state a];攻撃
type = Helper
trigger1 = animelem = 5, = 0
trigger1 = anim = 1301
id = 1300
name = "zannzo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1317
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;(HELPER)攻撃用ヘルパー
[Statedef 1315]
type = A
ctrl = 0
anim = 1312
velset = 0.5,0
movetype = A
physics = N
sprpriority = 2

;---------------------[攻撃]
[State 1051, 2]
type = Projectile
triggerall = root,var(1) <= 0
tirggerall = root,numprojID(1315) = 0
trigger1 = animelem = 1, = 0
trigger2 = var(4) = 0
trigger2 = time <= 50
projpriority = 1
attr = S, SP
projID = 1315
projanim = 1315
projremovetime = 5 ;50 - time
projhits = 1
projremove = 1
projhitanim = -1
offset = 0,0
velocity = 0,0
hitflag = MA
damage = floor(20 * root,fvar(0)) + root,var(8)*5, 4
getpower = 20,20
givepower = 10+var(29)*5,10+var(29)*5
animtype = Hard
guardflag = M
pausetime = 0,4
pausemovetime = 0
sparkno = s7006
sparkxy = 50,-60
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
air.type = high
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-7.2
air.velocity = -4.5,-7.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 0
ownpal = 1
yaccel = 0.47

[State 1051, 2]
type = Projectile
tirggerall = root,numprojID(1315) = 0
trigger1 = var(4) = [1,8]
trigger1 = time > 1 && time % 4 = 0
projpriority = 1
attr = S, SP
projID = 1315
projanim = 1316
projremovetime = 5
projhits = 1
projremove = 1
projhitanim = -1
offset = 0,0
velocity = 0,0
hitflag = MAFLD
damage = floor(20 * root,fvar(0)) + root,var(8)*5, 4
getpower = 20,20
givepower = 10+var(29)*5,10+var(29)*5
animtype = Hard
guardflag = M
pausetime = 0,4
pausemovetime = 0
sparkno = s7006
sparkxy = 50,-60
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
air.type = high
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-7.2
air.velocity = -4.5,-7.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 0
ownpal = 1
yaccel = 0.47

[state a]
type = varset
trigger1 = time = 0
v = 4
value = 0

[state a]
type = varadd
trigger1 = root,projcontacttime(1315) = 1
v = 4
value = 1

;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;(HELPER)攻撃用ヘルパー
[Statedef 1317]
type = A
ctrl = 0
anim = 1312
velset = 1,0
movetype = A
physics = N
sprpriority = 2

;---------------------[攻撃]
[State 1051, 2]
type = Projectile
triggerall = root,var(1) <= 0
tirggerall = root,numprojID(1315) = 0
trigger1 = animelem = 1, = 0
trigger2 = var(4) = 0
trigger2 = time <= 50
projpriority = 1
attr = S, SP
projID = 1315
projanim = 1317
projremovetime = 5 ;50 - time
projhits = 1
projremove = 1
projhitanim = -1
offset = 0,0
velocity = 0,0
hitflag = MA
damage = floor(20 * root,fvar(0)) + root,var(8)*5, 4
getpower = 20,20
givepower = 10+var(29)*5,10+var(29)*5
animtype = Hard
guardflag = M
pausetime = 0,4
pausemovetime = 0
sparkno = s7006
sparkxy = 50,-100
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
air.type = high
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-7.2
air.velocity = -4.5,-7.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 0
ownpal = 1
yaccel = 0.47

[State 1051, 2]
type = Projectile
tirggerall = root,numprojID(1315) = 0
trigger1 = var(4) = [1,12]
trigger1 = time > 1 && time % 4 = 0
projpriority = 1
attr = S, SP
projID = 1315
projanim = 1318
projremovetime = 5
projhits = 1
projremove = 1
projhitanim = -1
offset = 0,0
velocity = 0,0
hitflag = MAFLD
damage = floor(20 * root,fvar(0)) + root,var(8)*5, 4
getpower = 20,20
givepower = 10+var(29)*5,10+var(29)*5
animtype = Hard
guardflag = M
pausetime = 0,4
pausemovetime = 0
sparkno = s7006
sparkxy = 50,-100
hitsound   = s410,1
guardsound = s120,1
guard.sparkno = s7012
air.type = high
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-7.2
air.velocity = -4.5,-7.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recover = 0
ownpal = 1
yaccel = 0.47

[state a]
type = varset
trigger1 = time = 0
v = 4
value = 0

[state a]
type = varadd
trigger1 = root,projcontacttime(1315) = 1
v = 4
value = 1

;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;イヤリング爆弾・弱
[Statedef 1600]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 100
sprpriority = 1
anim = 1600

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;爆弾の性能調整用
[State 3001, VarSet]
type = VarSet
trigger1 = time = 1
var(3) = 0

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelem = 9
value = 1600, 1

[State a];
type = PlaySnd
trigger1 = animelem = 9
value = 1600, 2

;---------------------

[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
anim = 1651
id = 1651
sprpriority = 3
postype = p1
pos = -15,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;---------------------

[STate 1100]
type = Helper
trigger1 = Animelem = 9, = 0 && Numhelper(2) = 0
id = 2
pos = 40,-80
postype = p1
ownpal = 1
stateno = 1620

;---------------------

[STate 1300]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;イヤリング爆弾・強
[Statedef 1610]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 100
sprpriority = 1
anim = 1600

[state a]
type = removeexplod
trigger1 = time = 0
id = 3000

;爆弾の性能調整用
[State 3001, VarSet]
type = VarSet
trigger1 = time = 1
var(3) = 0

;---------------------[サウンド]
[State a];
type = PlaySnd
trigger1 = animelem = 9
value = 1600, 1

[State a];
type = PlaySnd
trigger1 = animelem = 9
value = 1600, 2

;---------------------

[State explod];X
type = Explod
trigger1 = animelem = 4, = 0
anim = 1651
id = 1651
sprpriority = 3
postype = p1
pos = -15,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;---------------------

[STate 1100]
type = Helper
trigger1 = Animelem = 9, = 0 && Numhelper(2) = 0
id = 2
pos = 40,-80
postype = p1
ownpal = 1
stateno = 1621

;---------------------

[STate 1300]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;イヤリング爆弾・飛び道具弱
[Statedef 1620]
type = A
physics = N
movetype = A
anim = 1610
ctrl = 0
sprpriority = 3
velset = 3.5, -4

[State 1626]
type = NotHitby
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT

[STate 1115]
type = HitOverRide
trigger1 = 1
stateno = 1630
attr = SCA,NP,SP,HP

[State 1620]
type = null ;Gravity
trigger1 = 1

[State 1620]
type = VelAdd
trigger1 = 1
y = 0.4

[State 1620]
type = Explod
trigger1 = TimeMod = 24,0
anim = 1611
ID = 1611
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = -1

[State 1620]
type = Explod
trigger1 = TimeMod = 6,0
anim = 1652
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = 1

[State 1620]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = movecontact=0
attr = A, SP
damage = 65 + root,var(8)*15,6
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,-6
airguard.velocity = -2.9,-5
air.type = high
air.velocity = -3.4,-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[state a]
type = removeexplod
trigger1 = movecontact
trigger2 = Pos Y >= 0 && Vel Y > 0
id = 1611

[State 1620]
type = Changestate
trigger1 = movecontact
value = 1630

[State 1690]
type = PlaySnd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1600,0
channel = 1

[State 1620]
type = Changestate
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1625

;---------------------------------------------------------------------------
;イヤリング爆弾・飛び道具強

[Statedef 1621]
type = A
physics = N
movetype = A
anim = 1610
ctrl = 0
sprpriority = 3
velset = 3.5,-5

[State 1626]
type = NotHitby
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT

[STate 1115]
type = HitOverRide
trigger1 = 1
stateno = 1630
attr = SCA,NP,SP,HP

;爆弾の性能調整用
[State 3001, VarSet]
type = VarSet
trigger1 = 1
var(3) = root,var(3)

[State 1620]
type = null ;Gravity
trigger1 = 1

[State 1620]
type = VelAdd
trigger1 = 1
y = 0.4

[State 1620]
type = Explod
trigger1 = TimeMod = 24,0
anim = 1611
ID = 1611
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = -1

[State 1620]
type = Explod
trigger1 = TimeMod = 6,0
anim = 1652
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = 1

[State 1621]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = movecontact=0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6);-6
airguard.velocity = -1.9,-4
air.type = high
air.velocity = -3.4,ifelse(var(3) >= 1,-8,-6);-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[state a]
type = removeexplod
trigger1 = movecontact
trigger2 = Pos Y >= 0 && Vel Y > 0
id = 1611

[State 1620]
type = Changestate
trigger1 = movecontact
value = 1630

[State 1690]
type = PlaySnd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1600,0
channel = 1

[State 1620]
type = Changestate
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1625

;---------------------------------------------------------------------------
;イヤリング爆弾（床着地・その１）

[Statedef 1625]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
velset = 3,-3

[State 1626]
type = NotHitby
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT

[STate 1115]
type = HitOverRide
trigger1 = 1
stateno = 1630
attr = SCA,NP,SP,HP

[State 1620]
type = Gravity
trigger1 = time >= 10

[State 1620]
type = Explod
trigger1 = TimeMod = 24,0
anim = 1611
ID = 1611
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = -1

[State 1620]
type = Explod
trigger1 = TimeMod = 6,0
anim = 1652
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = 1

[State 1625]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = Pos Y <- 15
trigger1 = movecontact = 0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6) ;-6
airguard.velocity = -1.9,-4
air.type = high
air.velocity = -3.4,ifelse(var(3) >= 1,-8,-6) ;-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[State 1625]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = Pos Y >= -15
trigger1 = movecontact=0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag =M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6) ;-6
airguard.velocity = -1.9,-4
air.type = high
air.velocity = -3.4,ifelse(var(3) >= 1,-8,-6) ;-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[state a]
type = removeexplod
trigger1 = movecontact
trigger2 = Pos Y >= 0 && Vel Y > 0
id = 1611

[State 1620]
type = Changestate
trigger1 = movecontact
value = 1630

[State 1690]
type = PLaySnd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1600,0
channel = 1

[State 1620]
type = Changestate
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1626

;---------------------------------------------------------------------------
;イヤリング爆弾（床着地・その２）

[Statedef 1626]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
velset = 3,-2.5

[State 1626]
type = NotHitby
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT

[STate 1115]
type = HitOverRide
trigger1 = 1
stateno = 1630
attr = SCA,NP,SP,HP

[State 1620]
type=Gravity
trigger1=time>=10

[State 1620]
type = Explod
trigger1 = TimeMod = 24,0
anim = 1611
ID = 1611
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = -1

[State 1620]
type = Explod
trigger1 = TimeMod = 6,0
anim = 1652
pos = 0,0
ownpal = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
bindtime = 1

[State 1626]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = Pos Y < -15
trigger1 = movecontact=0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6) ;-6
airguard.velocity = -1.9,-4
air.type = high
air.velocity = -3.4,ifelse(var(3) >= 1,-8,-6) ;-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[State 1626]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = Pos Y >= -15
trigger1 = movecontact=0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime=0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6) ;-6
airguard.velocity = -1.9,-4
air.type = high
air.velocity = -3.4,ifelse(var(3) >= 1,-8,-6) ;-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
p1stateno=1630
sprpriority=3
yaccel = 0.47

[state a]
type = removeexplod
trigger1 = movecontact
trigger2 = Pos Y >= 0 && Vel Y > 0
id = 1611

[State 1620]
type = Changestate
trigger1 = movecontact
value = 1630

[State 1690]
type = PLaySnd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1600,0
channel = 3

[State 1620]
type = Changestate
trigger1 = Pos Y >=0 && Vel Y > 0
value=1640

;---------------------------------------------------------------------------
;イヤリング爆弾・飛び道具（爆発して消える）

[Statedef 1630]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
velset = 0,0
anim = 1610

[State 1626]
type = NotHitby
trigger1 = 1
value = SCA

[state a]
type = removeexplod
trigger1 = 1
id = 1611

[State 1690]
type = Explod
trigger1 = time = 4
anim = 1630
pos = 20,-30
postype = p1
ownpal = 1
sprpriority = 3

[State 1690]
type=Explod
trigger1 = time = 0
anim = 1631
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3
scale = 0.5,0.5

[STate 1630]
type = PlaySnd
trigger1 = Time = 0
value = 1600,3
channel = 3

[state 1630]
type = DestroySelf
trigger1 = Time = 10

;---------------------------------------------------------------------------
;イヤリング爆弾・飛び道具（爆発して消える）

[Statedef 1640]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
velset = 0,0
anim = 1615

[State 1626]
type = NotHitby
trigger1 = 1
value = SCA

[state a]
type = removeexplod
trigger1 = 1
id = 1611

[State 1690]
type=Explod
trigger1 = time = 0
anim = 1630
pos = 20,-30
postype = p1
ownpal = 1
sprpriority = 3

[State 1690]
type=Explod
trigger1 = time = 0
anim = 1631
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3
scale = 0.5,0.5

[STate 1630]
type = PlaySnd
trigger1 = Time = 0
value = 2000,1
channel = 3

[state 1630]
type=DestroySelf
trigger1=Time=10

[State 1626]
type = hitDef
triggerall = root,var(1) = 0
triggerall = root,var(13) <= 0
trigger1 = movecontact=0
attr = A, SP
damage = ifelse(var(3) >= 1,floor(120*root,fvar(0)) + root,var(8)*30,65 + root,var(8)*15),1
getpower = ifelse(var(3) >= 1,0,30),ifelse(var(3) >= 1,0,30)
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = s7002
guard.sparkno=s7012
sparkxy = -10, -26
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime =18
ground.hittime  = 18
ground.velocity = -4,ifelse(var(3) >= 1,-8,-6) ;-6
airguard.velocity = -1.9,ifelse(var(3) >= 1,-8,-6) ;-4
air.type = high
air.velocity = -3.4,-4
air.hittime = 20
envshake.ampl=5
envshake.time=4
palfx.time = 50
palfx.mul= 120,120,120
palfx.sinadd = 150,50,50,15
palfx.add = 150,20,20
fall = 1
fall.recover = 0
sprpriority=3
yaccel = 0.47






;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 5900]
type = S

;チーム戦時のドライブゲージ(チーム戦で全くドライブゲージがないまま始まるのも妙なので)
[State 00]
type = varset
triggerall = var(23) = 0
triggerall = time = 0
triggerall = teammode = turns
triggerall = roundno >= 2
trigger1 = var(23) := 1
var(19) = floor(power * 1000 / const(data.power))

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;(ENEMY)ガードクラッシュ
[Statedef 5910]
type = S
movetype= H
physics = N
sprpriority = 1
facing = enemy,facing

[State 895,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5910)
value = 5910

[State 895,ChangeAnim]
type = ChangeAnim
triggerall = Time = 50
trigger1 = anim = 5910
trigger1 = SelfAnimExist(5911)
value = 5911

[State 895,ChangeAnim]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = anim != 5910
value = 5915

;---------------------[演出]

[State 10000, 1]
type = VelSet
trigger1 = time = 1
x = 0

[State 10000, 1]
type = VelSet
trigger1 = time = 7
x = -6

[State 10000, 1]
type = VelMul
trigger1 = 1
x = 0.85

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = time = 18
x = 0

;---------------------[演出]

[State 851, end]
type = SelfState
trigger1 = time >= 60
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------

[state a]
type = varset
triggerall = var(24) < 0
trigger1 = 1
var(24) = 0

[state a]
type = varset
triggerall = var(18) < 0
trigger1 = 1
var(18) = 0

;ガードクラッシュ値・リセット
[State 1000, 0]
type = varset
triggerall = var(18) != 0
trigger1 = numtarget
trigger1 = target,statetype = S || target,statetype = C
trigger1 = target,movetype = H && target,stateno = 5910
var(18) = 0

;ガードクラッシュ値回復不能時間
[state a]
type = varadd
triggerall = var(24) >= 1
trigger1 = 1
var(24) = -1

;ガードクラッシュ値回復不能時間
[State 1000, 0]
type = varset
triggerall = fvar(4) > 0
triggerall = var(24) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
trigger2 = numhelper(2)
trigger2 = enemy,stateno = [120,159]
trigger2 = helper(2),stateno = 1630 && helper(2),time = 1
trigger3 = numhelper(1300)
trigger3 = helper(1300),stateno = 1220 && helper(1300),moveguarded = 1
trigger3 = helper(1300),hitcount = 1
trigger3 = time % 12 = 0
trigger4 = projcontacttime(1315) = 1
trigger5 = projcontacttime(2220) = 1
trigger6 = projcontacttime(2315) = 1
var(24) = 180

;ガードクラッシュ値回復不能時間・リセット
[State 1000, 0]
type = varset
triggerall = var(24) != 0
trigger1 = roundstate != 2
var(24) = -1


;ガードクラッシュ値回復
[state a]
type = varadd
triggerall = var(18) >= 1
trigger1 = var(24) <= 0
trigger1 = gametime % 20 = 0
var(18) = -3

;ガードクラッシュ値削り
[state a]
type = varadd
triggerall = fvar(4) > 0
trigger1 = moveguarded = 1
trigger2 = numhelper(2)
trigger2 = enemy,stateno = [120,159]
trigger2 = helper(2),stateno = 1630 && helper(2),time = 1
trigger3 = numhelper(1300)
trigger3 = helper(1300),stateno = 1220 && helper(1300),moveguarded = 1
trigger3 = helper(1300),hitcount = 1
trigger3 = time % 12 = 0
var(18) = floor(ifelse(stateno = 1200,4,8)*fvar(4))

;ガードクラッシュ値削り
[state a]
type = varadd
triggerall = fvar(4) > 0
triggerall = Enemynear,movetype = H && Enemynear,stateno = [150,159]
trigger1 = projcontacttime(1315) = 1
trigger2 = projcontacttime(2220) = 1
trigger3 = projcontacttime(2315) = 1
var(18) = ifelse(var(29) <= 0,2,1)

;ガードクラッシュ値削り追加分・ふっとばし攻撃
[state a]
type = varadd
triggerall = fvar(4) > 0
triggerall = moveguarded = 1
trigger1 = stateno = 290
trigger2 = stateno = 690
var(18) = floor(4*fvar(4))

;ガードクラッシュ値・リセット
[State 1000, 0]
type = varset
triggerall = var(18) != 0
trigger1 = roundstate != 2
var(18) = 0

;ガードクラッシュ音
[State 2]
type = playsnd
triggerall = fvar(4) > 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
value = 5910, 0

[State a]
type = EnvColor
triggerall = fvar(4) > 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
persistent = 0
time = 1
value = 255,255,255
under = 2

[State 6000];Guard Crash
type = Explod
triggerall = fvar(4) > 0
triggerall = teamside = 1
triggerall = Numexplod(7940) = 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
anim = 7941
id = 7940
sprpriority = 9
postype = right
pos = -65,50
ontop = 1
bindtime = -1
ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State 6000];Guard Crash
type = Explod
triggerall = fvar(4) > 0
triggerall = teamside != 1
triggerall = Numexplod(7940) = 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
anim = 7940
id = 7940
sprpriority = 9
postype = left
pos = 65,50
ontop = 1
bindtime = -1
ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.5,0.5

[State explod];エフェクト
type = Explod
triggerall = fvar(4) > 0
triggerall = Numexplod(5910) = 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
anim = 5917
id = 5910
sprpriority = 3
postype = p2
pos = 0,-50
vel = 0,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1

;ガードクラッシュ
[State 2, targetstate]
type = targetstate
triggerall = fvar(4) > 0
triggerall = numtarget
triggerall = target,alive
triggerall = var(18) >= 100
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
value = 5910

;ガードクラッシュ値・リセット
[State 1000, 0]
type = varset
triggerall = var(18) != 0
trigger1 = numtarget
trigger1 = target,statetype = S || target,statetype = C
trigger1 = target,movetype = H && target,stateno = 5910
trigger1 = target,anim = [5910,5919]
var(18) = 0

;---------------------------------------------------------------------------
[state -2, a];右向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = 1
v = 10
value = 1

[state -2, a];左向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = -1
v = 10
value = 2

[State -2, 1];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1

[State -2, 4];ハイジャンプ判定
type = varadd
trigger1 = 1
v = 15
value = -1

[State -2, 1];グランドセイバー・ダッシュの音止め
type = stopSnd
trigger1 = stateno != 1100
channel = 5

[State -2, 1];ボルテックランチャー・音止め
type = stopSnd
trigger1 = movetype = H
channel = 6

[state -2, a];崩れＫＯ用
type = varset
triggerall = fvar(6) = 0 && alive
trigger1 = statetype != A
fvar(6) = 1

[state -2, a];崩れＫＯ用
type = varset
triggerall = fvar(6) != 0 && alive
trigger1 = statetype = A
fvar(6) = 0

;KOボイス
[State 00]
type = PlaySnd
trigger1 = !alive && life <= 0
trigger1 = floor(fvar(7)) = 0
trigger1 = stateno != 5950
trigger1 = fvar(7) := 1
value = 11, 1
channel = 16

[state -2, a]
type = varset
triggerall = fvar(7) = 1
trigger1 = alive
fvar(7) = 0

;スラッシュセイバー相打ち時の相手解放
[State 1000, TargetState]
type = TargetState
triggerall = NumTarget(2100)
trigger1 = Target(2100),stateno != [120,159]
trigger1 = Target(2100),movetype = H
trigger1 = movetype = H
value = 2129

; 勝利フラグ
[State win]
type = varset
triggerall = var(17) = 0
trigger1 = win
var(17) = 1

[State win]
type = varset
triggerall = var(17) = 1
trigger1 = roundstate = 1
var(17) = 2

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::カウンターヒット設定
[state a]
type = varset
trigger1 = enemy,movetype = A
v = 8
value = 1
ignorehitpause = 1

[State 6000];Counter!
type = Explod
trigger1 = teamside = 1
trigger1 = stateno != [800,899] ;投げ
trigger1 = numexplod(7900) = 0
trigger1 = p2movetype = H && movehit = 1 && var(8) = 1
anim = 7900
id = 7900
sprpriority = 9
postype = left
pos = 60,85
ontop = 1
bindtime = -1
removetime = 40
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.6,0.6

[State 6000];Counter!
type = Explod
trigger1 = teamside = 2
trigger1 = stateno != [800,899] ;投げ
trigger1 = numexplod(7900) = 0
trigger1 = p2movetype = H && movehit = 1 && var(8) = 1
anim = 7901
id = 7900
sprpriority = 9
postype = right
pos = -60,85
ontop = 1
bindtime = -1
removetime = 40
ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
scale = 0.6,0.6

[State a]
type = EnvColor
trigger1 = movehit = 1
trigger1 = var(8) = 1
trigger1 = stateno != [800,899] ;投げ
trigger1 = var(2) := 1
persistent = 0
ignorehitpause = 1
time = 1
value = 255,255,255
under = 2

[state a]
type = varset
trigger1 = enemy,movetype != A
v = 8
value = 0
ignorehitpause = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;特殊メッセージ
;//////////////////////////////////////////////////////////////////////////

[state a];パワーキャラ
type = varset
triggerall = var(9) = 0
trigger1 = P2Name = "Chang Koehan" || P4Name = "Chang Koehan"
trigger2 = P2Name = "chang_koehan" || P4Name = "chang_koehan"
trigger3 = P2Name = "BIG BEAR" || P4Name = "BIG BEAR"
trigger4 = P2Name = "Raiden" || P4Name = "Raiden"
v = 9
value = 1

[state a];クーラ(無邪気子供キャラ)
type = varset
triggerall = var(9) = 0
trigger1 = p2name = "Kula" || p4name = "Kula"
trigger2 = p2name = "Kula Diamond" || p4name = "Kula Diamond"
trigger3 = p2name = "KulaXI" || p4name = "KulaXI"
trigger4 = p2name = "Lilith" || p4name = "Lilith"
trigger5 = p2name = "Heart_Aino" || p4name = "Heart_Aino"
trigger6 = p2name = "rimururu" || p4name = "rimururu"
v = 9
value = 2

[state a];怒部隊
type = varset
triggerall = var(9) = 0
trigger1 = p2name = "Ralf" || p4name = "Ralf"
trigger2 = p2name = "Ralf Jones" || p4name = "Ralf Jones"
trigger3 = p2name = "Ralf_WLS" || p4name = "Ralf_WLS"
trigger4 = p2name = "Clark" || p4name = "Clark"
trigger5 = p2name = "Clark Steel" || p4name = "Clark Steel"
trigger6 = p2name = "Ralf99" || p4name = "Ralf99"
trigger7 = p2name = "CLARK 2K2" || p4name = "CLARK 2K2"
trigger8 = p2name = "Tin's Clark" || p4name = "Tin's Clark"
trigger9 = p2name = "Whip" || p4name = "Whip"
trigger10 = p2name = "Whip2k" || p4name = "Whip2k"
trigger11 = p2name = "Whip2k1" || p4name = "Whip2k1"
trigger12 = p2name = "Whip2k2" || p4name = "Whip2k1"
trigger13 = p2name = "Whip11" || p4name = "Whip11"
trigger14 = p2name = "Fio" || p4name = "Fio"
trigger15 = p2name = "Clark Still" || p4name = "Clark Still"
trigger16= p2name = "Heidern" || p4name = "Heidern"
v = 9
value = 3

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;空中ヒット制限
;//////////////////////////////////////////////////////////////////////////

[state a];通常技空中ヒット時、追撃不可になる(なんでも判定は除く)
type = varset
triggerall = var(1) <= 0 && roundstate = 2
triggerall = movehit = 1 && var(8) = 0 && var(2) = 0
triggerall = Enemynear,statetype = A && Enemynear,movetype = H
trigger1 = (stateno = [200,699])
var(1) = 1

[state a];解除
type = varset
triggerall = var(1) >= 1
trigger1 = Enemynear,statetype != A || Enemynear,stateno = 52
trigger2 = Enemynear,movetype = A
trigger3 = roundstate != 2
trigger4 = movehit = 1
trigger4 = (stateno = [1000,1999]) || (stateno = [2000,3999]) || var(2) >= 1
trigger5 = numhelper(2)
trigger5 = enemy,stateno != [120,159]
trigger5 = helper(2),stateno = 1630 && helper(2),time = 1
trigger6 = numhelper(1300)
trigger6 = helper(1300),stateno = 1220 && helper(1300),movehit = 1
trigger6 = helper(1300),hitcount = 1
trigger6 = time % 12 = 0
trigger7 = projcontacttime(1315) = 1
trigger8 = projcontacttime(2220) = 1
trigger9 = projcontacttime(2315) = 1
var(1) = 0

[state a];カウンターヒットリセット
type = varset
triggerall = var(2) >= 1
trigger1 = 1
var(2) = 0

[state a];イヤリング爆弾用
type = varset
triggerall = var(13) = 0
trigger1 = numhelper(2)
trigger1 = helper(2),movecontact
var(13) = 1

[state a]
type = varset
triggerall = var(13) >= 1
trigger1 = roundstate != 2
trigger2 = EnemyNear(Var(53)),statetype != A || EnemyNear(Var(53)),stateno = [120,159]
var(13) = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダッシュ終了時のエフェクトの消去
[State 1];ブレスレットのエフェクト消去、主に通常動作
type = removeexplod
trigger1 = MoveType = H && stateno != [120,159]
ID = 3000

;Ｘキャリバーエフェクト
[state a]
type = removeexplod
trigger1 = MoveType = H
trigger2 = time = 1
id = 1227

;ダメージ時の残像の消去
[state a];
type = afterimagetime
trigger1 = MoveType = H
time = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;//////////////////////////////////////////////////////////////////////////
;ダメージボイス
[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 0
value = 5000,0+(random%4)
persistent = 0

[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 1
value = 5001,0+(random%4)
persistent = 0

[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 2
trigger2 = GetHitVar(animtype) = 3
trigger3 = GetHitVar(animtype) = 4
value = 5002,0+(random%4)
persistent = 0

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;コンボによるダメージ補正
;//////////////////////////////////////////////////////////////////////////
; 

[state a]
type = varset
trigger1 = 1
fvar(0) = 1.0

[state a];連続ヒット数記憶
type = varadd
triggerall = enemy,movetype = H
triggerall = movehit = 1
trigger1 = stateno = [200,2999]
var(14) = 1

[state a];連続ヒット数記憶(飛び道具)
type = varadd
triggerall = enemy,movetype = H
trigger1 = numhelper(2)
trigger1 = enemy,stateno != [120,159]
trigger1 = helper(2),stateno = 1630 && helper(2),time = 1
trigger2 = numhelper(1300)
trigger2 = helper(1300),stateno = 1220 && helper(1300),movehit = 1
trigger2 = helper(1300),hitcount = 1
trigger2 = time % 12 = 0
var(14) = 1

[state a];連続ヒット数記憶(飛び道具)
type = varadd
triggerall = enemy,movetype = H
trigger1 = projcontacttime(1315) = 1
trigger2 = projcontacttime(2220) = 1
trigger3 = projcontacttime(2315) = 1
var(14) = 1

[state a];ヒット数リセット
type = varset
triggerall = var(14) != 0
trigger1 = Enemynear,ctrl || Enemynear,movetype != H
trigger2 = roundstate != 2
trigger3 = Enemynear,statetype = L 
var(14) = 0

[state a];補正
type = varset
trigger1 = enemy,movetype = H
trigger1 = var(14) >= 1
fvar(0) = (100.0 - (var(14) * 5.0)) / 100.0

[state a];補正(超必)・(AC版)
type = varset
triggerall = fvar(0) < 0.5
trigger1 = var(29) <= 0
trigger1 = stateno = [3000,3499]
trigger2 = stateno = [3500,3999]
fvar(0) = 0.5

[state a];補正(超必)・(家庭用版)
type = varset
trigger1 = stateno = [3000,3499]
trigger1 = fvar(0) < 0.4
fvar(0) = 0.4

[state a];補正
type = varset
trigger1 = fvar(0) < 0.2
fvar(0) = 0.2

[state a]
type = attackmulset
trigger1 = 1
value = fvar(0)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;勝利時のサウンドストップ
;//////////////////////////////////////////////////////////////////////////

[State a]
type = null ;AssertSpecial
trigger1 = RoundState != 2
flag = nobardisplay

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ハイパードライブゲージ
;//////////////////////////////////////////////////////////////////////////

;ドライブゲージ回復停止時間(ドライブキャンセル使用後、３カウント回復しない)
[state a]
type = varadd
triggerall = var(21) >= 1
trigger1 = 1
var(21) = -1

;-----

[state -2 ,1];ハイパードライブモード発動時のパワーセット
type = varset
trigger1 = var(20) = 600
var(22) = power

[state -2 ,1]
type = varadd
triggerall = time = 1
trigger1 = stateno = 2000
trigger2 = stateno = 2100
trigger3 = stateno = 2200
trigger4 = stateno = 2300
trigger5 = stateno = 2600
trigger6 = stateno = 3000
trigger7 = stateno = 3100
var(22) = -1000

[state -2 ,1]
type = varadd
triggerall = time = 1
trigger1 = stateno = 3050
var(22) = -2000

[state -2 ,1]
type = varset
trigger1 = var(22) < 0
var(22) = 0

[state a]
type = powerset
trigger1 = var(20) > 0
value = var(22)
ignorehitpause = 1

;-----

[state a]
type = varset
triggerall = var(20) <= 0
trigger1 = var(19) > 1000
var(19) = 1000

[state a]
type = varset
trigger1 = var(19) < 0
trigger2 = var(20) > 0
var(19) = 0

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = stateno != [2000,3999]
trigger1 = movecontact = 1
var(19) = ifelse(movehit,20,10)

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = movehit = 1
trigger1 = stateno = 210 || stateno = 215
trigger2 = stateno = 240 || stateno = 245
trigger3 = stateno = 410 || stateno = 440
trigger4 = stateno = 610 || stateno = 640
trigger5 = stateno = 250 || stateno = 255
trigger6 = stateno = 800 || stateno = 820
var(19) = 25

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = movehit = 1
triggerall = var(21) <= 0
trigger1 = stateno = 290 || stateno = 690
trigger2 = stateno = 1000 || stateno = 1110
trigger3 = stateno = 1250
var(19) = 55

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
trigger1 = numhelper(2)
trigger1 = enemy,stateno != [120,159]
trigger1 = helper(2),stateno = 1630 && helper(2),time = 1
trigger1 = helper(2),var(3) <= 0
trigger2 = numhelper(1300)
trigger2 = helper(1300),stateno = 1220 && helper(1300),movehit = 1
trigger2 = helper(1300),hitcount = 1
trigger2 = time % 12 = 0
var(19) = 55

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
trigger1 = projcontacttime(1315) = 1
var(19) = 5

;---

;ガード時のドライブゲージ増加
[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = stateno = 150 ||  stateno = 152 || stateno = 154
triggerall = alive = 1
trigger1 = time = 0
var(19) = 5

;ダメージ時のドライブゲージ増加
[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 0
var(19) = 5

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 1
var(19) = 10

[state a]
type = varadd
triggerall = NumExplod(7910) = 0
triggerall = var(20) <= 0
triggerall = var(21) <= 0
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 2
trigger2 = GetHitVar(animtype) = 3
trigger3 = GetHitVar(animtype) = 4
var(19) = 20

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ハイパードライブモード
;//////////////////////////////////////////////////////////////////////////
;---------------------[変数]

[state a]
type = varadd
triggerall = !((stateno = 3000 && time <= 28) || (stateno = 3050 && time <= 28) || (stateno = 3100 && time <= 28))
trigger1 = var(20) > 0
v = 20
value = -1

[state a]
type = varset
trigger1 = var(20) < 0
v = 20
value = 0

;---------------------[演出]

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(20)>120
time=2
add=32+ceil(sin(var(20)/16.0*pi)*32),32+ceil(sin(var(20)/16.0*pi)*32),32+ceil(sin(var(20)/16.0*pi)*32)
ignorehitpause=1

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(20)=[1,120]
time=2
add=64+ceil(sin(var(20)/8.0*pi)*64),64+ceil(sin(var(20)/8.0*pi)*64),64+ceil(sin(var(20)/8.0*pi)*64)
ignorehitpause=1

[state a]
type = varset
trigger1 = roundstate = 1
trigger1 = var(20) > 0
v = 20
value = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ゲージ
;//////////////////////////////////////////////////////////////////////////
;---------------------[ヘルパー]
[state a];ゲージ
type = Helper
trigger1 = numhelper(7500) = 0
id = 7500
name = "g"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 7500
helpertype = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;エフェクト
;//////////////////////////////////////////////////////////////////////////

;しゃがみエフェクト1
[State -2]
type = Explod
trigger1 = NumExplod(13) = 0
trigger1 = anim = 10
trigger1 = animelem = 3, = 0
anim = 13
id = 13
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 10
id = 13

;しゃがみエフェクト2
[State -2]
type = Explod
trigger1 = NumExplod(14) = 0
trigger1 = anim = 10
trigger1 = animelem = 3, = 0
anim = 14
id = 14
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 10
id = 14

;---

;着地エフェクト1
[State -2]
type = Explod
trigger1 = NumExplod(48) = 0
trigger1 = anim = 47
trigger1 = animelem = 2, = 0
anim = 48
id = 48
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 47
id = 48

;着地エフェクト2
[State -2]
type = Explod
trigger1 = NumExplod(49) = 0
trigger1 = anim = 47
trigger1 = animelem = 2, = 0
anim = 49
id = 49
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 47
id = 49

;---

;ガード準備エフェクト1
[State -2]
type = Explod
trigger1 = NumExplod(160) = 0
trigger1 = anim = 120
trigger1 = animelem = 2, = 0
anim = 160
id = 160
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 120
id = 160

;ガード準備エフェクト2
[State -2]
type = Explod
trigger1 = NumExplod(161) = 0
trigger1 = anim = 120
trigger1 = animelem = 2, = 0
anim = 161
id = 161
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 120
id = 161

;ガード準備エフェクト3
[State -2]
type = Explod
trigger1 = NumExplod(162) = 0
trigger1 = anim = 121
trigger1 = animelem = 2, = 0
anim = 162
id = 162
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 121
id = 162

;ガード準備エフェクト4
[State -2]
type = Explod
trigger1 = NumExplod(163) = 0
trigger1 = anim = 121
trigger1 = animelem = 2, = 0
anim = 163
id = 163
postype = p1
pos = 0,0
facing = 1
;removetime = -1
bindtime = -1
sprpriority = 1
scale = const(size.xscale),const(size.yscale)

[State -2, gard]
type = RemoveExplod
trigger1 = anim != 121
id = 163

;---

[State -2];弱パンチ
type = Explod
trigger1 = NumExplod(201) = 0
trigger1 = stateno = 200
trigger1 = animelem = 2, = 0
anim = 201
id = 201
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 200
id = 201

[State -2];遠強パンチ1
type = Explod
trigger1 = NumExplod(211) = 0
trigger1 = stateno = 210
trigger1 = animelem = 5, = 0
anim = 211
id = 211
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 210
id = 211

[State -2];遠強パンチ2
type = Explod
trigger1 = NumExplod(212) = 0
trigger1 = stateno = 210
trigger1 = animelem = 8, = 0
anim = 212
id = 212
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 210
id = 212

[State -2];近強パンチ
type = Explod
trigger1 = NumExplod(216) = 0
trigger1 = stateno = 215
trigger1 = animelem = 2, = 0
anim = 216
id = 216
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 215
id = 216

;---

[State -2];ストライクアーチ
type = Explod
trigger1 = NumExplod(251) = 0
trigger1 = stateno = 250
trigger1 = animelem = 7, = 0
anim = 251
id = 251
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 250
id = 251

[State -2];ストライクアーチ(キャンセル版)
type = Explod
trigger1 = NumExplod(256) = 0
trigger1 = stateno = 255
trigger1 = animelem = 7, = 0
anim = 256
id = 256
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 255
id = 256

;---

[State -2];しゃがみ強パンチ1
type = Explod
trigger1 = NumExplod(411) = 0
trigger1 = stateno = 410
trigger1 = animelem = 6, = 0
anim = 411
id = 411
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 410
id = 411

[State -2];しゃがみ強パンチ2
type = Explod
trigger1 = NumExplod(412) = 0
trigger1 = stateno = 410
trigger1 = animelem = 6, = 0
anim = 412
id = 412
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 410
id = 412

[State -2];しゃがみ強パンチ3
type = Explod
trigger1 = NumExplod(413) = 0
trigger1 = stateno = 410
trigger1 = animelem = 7, = 0
anim = 413
id = 413
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 410
id = 413

;---

[State -2];空中弱パンチ
type = Explod
trigger1 = NumExplod(601) = 0
trigger1 = stateno = 600
trigger1 = animelem = 3, = 0
anim = 601
id = 601
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 2
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 600
id = 601

[State -2];空中ふっとばし
type = Explod
trigger1 = NumExplod(691) = 0
trigger1 = stateno = 690
trigger1 = animelem = 3, = 0
anim = 691
id = 691
postype = p1
pos = 0,0
facing = 1
bindtime = -1
sprpriority = 5
scale = const(size.xscale),const(size.yscale)
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State -2, gard]
type = RemoveExplod
trigger1 = stateno != 690
id = 691

;---------------------------------
;右代宮縁寿「メタ返し＆メタ再反論」対応ステート

[State -2];メタ返し〜カットイン（右向き）
type = Explod
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
triggerall = enemynear,stateno = 2910 && enemynear,time = 2
trigger1 = facing = 1
anim = 19864
ID = 19864
postype = left
pos = 0,240
facing = 1
scale = 0.5,0.5
ownpal = 1
sprpriority = -30
pausemovetime = 999999999
supermovetime = 999999999

[State -2];メタ返し〜カットイン（左向き）
type = Explod
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
triggerall = enemynear,stateno = 2910 && enemynear,time = 2
trigger1 = facing = -1
anim = 19864
ID = 19864
postype = right
pos = 0,240
facing = -1
scale = 0.5,0.5
ownpal = 1
sprpriority = -30
pausemovetime = 999999999
supermovetime = 999999999

[State -2];メタ返し〜ボイス
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
trigger1 = enemynear,stateno = 2910 && enemynear,time = 2
value = s190,3

[State -2];メタ返し〜パワーゲージ消費
type = Poweradd
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
trigger1 = enemynear,stateno = 2910 && enemynear,time = 2
value = -1000

[State -2];メタ再反論〜カットイン（右向き）
type = Explod
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
triggerall = enemynear,stateno = 2930 && enemynear,time = 2
trigger1 = facing = 1
anim = 19865
ID = 19865
postype = left
pos = 0,240
facing = 1
scale = 0.5,0.5
ownpal = 1
sprpriority = -30
pausemovetime = 999999999
supermovetime = 999999999

[State -2];メタ再反論〜カットイン（左向き）
type = Explod
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
triggerall = enemynear,stateno = 2930 && enemynear,time = 2
trigger1 = facing = -1
anim = 19865
ID = 19865
postype = right
pos = 0,240
facing = -1
scale = 0.5,0.5
ownpal = 1
sprpriority = -30
pausemovetime = 999999999
supermovetime = 999999999

[State -2];メタ再反論〜ボイス
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
trigger1 = enemynear,stateno = 2930 && enemynear,time = 2
value = s192,0

[State -2];メタ再反論〜パワーゲージ消費
type = Poweradd
triggerall = numenemy
triggerall = enemynear,name = "USHIROMIYA ANGE" && enemynear,Authorname = "YU-TOHARU"
trigger1 = enemynear,stateno = 2930 && enemynear,time = 2
value = -2000

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 
trigger2 = stateno = 106
value = 41, 0

[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = animtime = 0 ;time = 1
trigger1 = stateno = 40 
trigger1 = var(15) <= 0
trigger2 = stateno = 42 || stateno = 43 || stateno = 62
value = 40, 0
channel = 3

[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = animtime = 0 ;time = 1
trigger1 = stateno = 40 
trigger1 = var(15) > 1
trigger2 = stateno = 65 || stateno = 68
value = 40, 1
channel = 3

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; ハイジャンプ処理
[State -3, 5];ハイジャンプ判定
type = varset
trigger1 = stateno = 10
trigger1 = time = 0
trigger2 = stateno = 100
v = 15
value = 20

[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger1 = time = 0
v = 15
value = 0

; 小ジャンプ処理
[State -3, 5];小ジャンプ判定
type = varset
trigger1 = stateno = 40
trigger1 = command != "holdup" && var(59) <= 0
v = 16
value = 1

[State -3, 5];小ジャンプ消去
type = varset
trigger1 = stateno = 40
trigger1 = command = "holdup" && var(59) <= 0
v = 16
value = 0

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(15) >= 1
x = 5
;y = -9


[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(15) >= 1
x = -5
;y = -9

[State -3, 5];小ジャンプ
type = veladd
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(16) = 1
y = 2

;------------------------------------
;先行入力関係

;先行入力受付時間カウント
[State 1000, 0]
type = varadd
trigger1 = fvar(9) > 0
fvar(9) = -1

[State 1000, 0]
type = varset
triggerall = fvar(10) != 0
trigger1 = fvar(9) = 0
fvar(10) = 0

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 3000
triggerall = var(20) > 0 || var(19) >= 1000
trigger1 = command = "レオナブレード"
fvar(10) = 3500

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
triggerall = command = "スラッシュセイバー"
trigger1 = command = "a"
trigger1 = fvar(11) := 1
trigger2 = command = "b"
trigger2 = fvar(11) := 2
fvar(10) = 3100

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 2000
trigger1 = command = "MAXVスラッシャー"
fvar(10) = 3050

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
triggerall = command = "Vスラッシャー"
trigger1 = command = "x"
trigger1 = fvar(11) := 1
trigger2 = command = "y"
trigger2 = fvar(11) := 2
fvar(10) = 3000

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
trigger1 = command = "グランドセイバーEX"
fvar(10) = 2100

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = command = "グランドセイバー"
trigger1 = command = "a"
trigger1 = fvar(11) := 1
trigger2 = command = "b"
trigger2 = fvar(11) := 2
fvar(10) = 1100

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
trigger1 = command = "ムーンスラッシャーEX"
fvar(10) = 2000

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = command = "ムーンスラッシャー"
trigger1 = command = "x"
trigger1 = fvar(11) := 1
trigger2 = command = "y"
trigger2 = fvar(11) := 2
fvar(10) = 1000

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
trigger1 = command = "ボルテックランチャーEX"
fvar(10) = 2300

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = command = "ボルテックランチャー"
trigger1 = command = "x"
trigger1 = fvar(11) := 1
trigger2 = command = "y"
trigger2 = fvar(11) := 2
fvar(10) = 1300

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
trigger1 = command = "イヤリング爆弾EX"
fvar(10) = 2600

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
trigger1 = command = "イヤリング爆弾A"
fvar(10) = 1600

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
trigger1 = command = "イヤリング爆弾B"
fvar(10) = 1610

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
triggerall = power >= 1000
trigger1 = command = "XキャリバーEX"
fvar(10) = 2200

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
trigger1 = command = "Xキャリバー2"
fvar(10) = 1250

[State 1000, 0]
type = varset
triggerall = fvar(10) = 0 && fvar(9) = 0
trigger1 = command = "Xキャリバー1"
fvar(10) = 1200

[State 1000, 0]
type = varset
trigger1 = time = 1
trigger1 = fvar(10) = stateno
fvar(9) = 0

[State 1000, 0]
type = varset
trigger1 = time = 1
trigger1 = fvar(10) = stateno
fvar(10) = 0

;------------------------------------
;敵空中喰らい行動不能再現用奪取ステート

[State 2, targetstate]
type = targetstate
triggerall = numtarget(200)
triggerall = target(200),alive
triggerall = var(1) >= 1
trigger1 = target(200),stateno = 5020
trigger1 = target(200),statetype = A
trigger1 = target(200),movetype = H
value = 15020

;------------------------------------

;崩れKO移行
[State -2, 3] 
type = ChangeState
trigger1 = !alive
trigger1 = floor(fvar(6)) = 1
trigger1 = (prevstateno = [120,159])
trigger1 = Stateno = [5000,5999]
trigger1 = fvar(7) := 1
value = 5950

[State 2, destroyself];分身バグ対策
type = destroyself
trigger1 = ishelper(1300)
trigger1 = movetype = H

;------------------------------------
;トレーニング時のドライブコンボ練習用
[state a]
type = varset
;triggerall = roundstate <= 1
triggerall = var(20) <= 0
triggerall = var(21) <= 0
trigger1 = var(19) < 1000
trigger1 = 0 ;←の数字を 1 にすると、常にドライブゲージがMAXになります。
var(19) = 1000

;勝利画面演出の有無
[State 1000, 0]
type = varset
triggerall = var(25)  = 0
trigger1 = 1; ←の数字を0にすれば、勝利画面演出がなくなります。
var(25) = 1

;先行入力受付時間
[State 1000, 0]
type = varset
triggerall = fvar(9)  = 0
trigger1 = fvar(10) > 0
fvar(9) = 5 ;←受付時間(F)

;ガードクラッシュの有無、しやすさ
[State 1000, 0]
type = varset
triggerall = fvar(4)  = 0
trigger1 = 1 ; ←の数字を0にすれば、ガークラ無し
fvar(4) = 1.0 ;←ガークラ値上昇比率。デフォなら１３発連続ガードでガークラ

;AC版or家庭用版
[State 1000, 0]
type = varset
triggerall = var(29)  = 0
trigger1 = 1
var(29) = 1 ; ←の数字を0にすればAC版、1にすれば家庭用版の性能になります。
