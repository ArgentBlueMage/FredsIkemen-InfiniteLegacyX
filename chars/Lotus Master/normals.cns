; Oda Nobunaga - made by Nobun (Mugenation Team)
;
;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
; CNS ƒŒƒxƒ‹: Šî–{
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

;[State 170, 0]
;type = ChangeAnim
;value = 170
;trigger1 = time = 0 && var(10) = 1

[State 170, 1]
type = playSnd
value = 2,14
trigger1 = time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
; CNS ƒŒƒxƒ‹: Šî–{
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0 && var(10) = 1
value = 184;182

[State 180, 2]
type = ChangeState
trigger1 = time = 0 && var(10) != 1
value = 184;ifelse(random>722,186,184)

;---------------------------------------------------------------------------
; Win pose 1 (swd)

[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, 1]
type = PlaySnd
value = 2,6
trigger1 = time = 0

[State 182, 2]
type = PlaySnd
value = 2, 5
trigger1 = time = 32

[State 182, 3]
type = Explod
trigger1 = time = 16
anim = 6002
pos = 68,-27
postype = p1
removetime = -1
shadow = -1
sprpriority = 2

[State 182, 4]
type = Explod
trigger1 = time = 24
anim = 6001
pos = 68, 0
postype = p1
shadow = -1
sprpriority = 3

;---------------------------------------------------------------------------
; Win pose 2 (no swd)
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184, 1]
type = PlaySnd
value = 2, 5
trigger1 = time = 58


[State 184, 1]
type = PlaySnd
value = 0, 47
trigger1 = time = 95

[State 184, 1]
type = PlaySnd
value = 9999, 11
trigger1 = time = 0


[State 182, 3]
type = Explod
trigger1 = time = 95
anim = 175
pos = 180,-10
postype = p1
removetime = -1
shadow = -1
sprpriority = 2

;---------------------------------------------------------------------------
; Win pose 3 (no swd)
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0

[State 186, 1]
type = PlaySnd
value = 2, 4
trigger1 = time = 12

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
; CNS ƒŒƒxƒ‹: Šî–{
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 184, 1]
type = PlaySnd
value = 1, 9
trigger1 = time = 1

[State 0]
type = Explod
trigger1 = animelem = 1  ;time = 50
anim = 191
ID = 191
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 4;5
ontop = 0
shadow = -1
ownpal = 0
removeongethit = 0


;[State 0]
;type = Explod
;trigger1 = time = 0;animelem = 1
;anim = 192
;ID = 192
;pos = 400,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;vfacing = 1
;bindtime = 1
;vel = -3.5,0
;accel = 0,0
;random = 0,0
;removetime = -2
;supermove
;pausemove
;scale = 1,1
;sprpriority = 5
;ontop = 0
;shadow = -1
;ownpal = 0
;removeongethit = 0



;[State 0]
;type = Explod
;trigger1 = time = 120;animelem = 1
;anim = 193
;ID = 192
;pos = 400,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;vfacing = 1
;bindtime = 1
;vel = -3.5,0
;accel = 0,0
;random = 0,0
;removetime = -2
;supermove
;pausemove
;scale = 1,1
;sprpriority = 5
;ontop = 0
;shadow = -1
;ownpal = 0
;removeongethit = 0
;ignorehitpause =
;persistent =

[State 186, 1]
type = PlaySnd
value = 40, 1
trigger1 = time = 195

[State 186, 1]
type = PlaySnd
value = 1, 2
trigger1 = time = 185

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;[State 191, 4]
;type = PlaySnd

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = -2

[State -3, dash]
type = PlaySnd
trigger1 = time = 1
value = 1000,0
volume = 200
loop = 1
channel = 27

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn


[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 101
;---------------------------------------------------------------------------
; RUN_FWD_2
[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 1

;[State 0]
;type = Explod
;trigger1 = animelem = 2
;anim = 102
;ID = 102
;pos = 0,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;vfacing = 1
;bindtime = 1
;vel = 0,0
;accel = 0,0
;random = 0,0
;removetime = -2
;supermove
;pausemove
;scale = 1,1
;sprpriority = 5
;ontop = 0
;shadow = -1
;ownpal = 0
;removeongethit = 0
;ignorehitpause =
;persistent =

[State 100, 4]
type = VelMul
trigger1 = AnimElem = 4,< 0
x = .2

[State 100, 4]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 100, snd]
type = PlaySnd
trigger1 = Time = 0
value = 9999, 10

[State 100, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------




;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = -2

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1



[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;------------------------------------------------------------

; standing pugno debole senza spada (no fwd)
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 200                       
poweradd = 20                    
sprpriority = 2                  

[State 200, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,28

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = S8020;0                      ;Spark anim no (Def: set above)
sparkxy = -40, -86               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16
guardsound = S0,12
guard.sparkno = s8040             ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 200, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = S8020;0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = 5, 0                  ;Sound to play on hit
guardsound = S0,12
guard.sparkno = s8040               ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; standing pugno forte senza spada
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2



[State 210, 0] ;Far
type = ChangeAnim
triggerall = Time = 0
trigger1 = P2BodyDist X >= 40
value = 210

[State 210, 0] ;Close
type = ChangeAnim
triggerall = Time = 0
trigger1 = P2BodyDist X < 40
value = 250



[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 29

[State 210, 2]
type = PlaySnd
trigger1 = Time = 4
value = 2,1

[State 210, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 57, 7
guardflag = MA
pausetime = 0,0
sparkno = S8030;1
sparkxy = -10,-70
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210, 5]
type = VarAdd
v = 4
value = 1
trigger1 = Animelem = 6
trigger1 = var(4) = 0
trigger2 = (time = 1) && var(4) = 1

[State 210, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; Forward Strong Punch
; CNS difficulty: easy
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 10
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 240

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2, 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 34

[State 215, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 25, 0
animtype = High
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = s6010;S8020
guard.sparkno = s8040
sparkxy = -28, -70
hitsound   = S9999,12
guardsound = S0,13
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = -8
airguard.velocity = -2,-3
air.type = High
air.velocity = -4,-6
air.hittime = 15


[State 215, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 25, 0
animtype = High
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = s6010;S8020
guard.sparkno = s8040
sparkxy = -28, -70
hitsound   = S9999,12
guardsound = S0,13
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = -8
airguard.velocity = -2,-3
air.type = High
air.velocity = -4,-6
air.hittime = 15
fall = 1


[State 215, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;standing calcio debole senza spada (no fwd)
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 22
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2

[State 220, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 27

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 26, 5
guardflag = MA
pausetime = 0,0
sparkno = S8020;0
sparkxy = -10,-37
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;standing calcio forte (senza spada)
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2


[State 240, 0] ;Far
type = ChangeAnim
triggerall = Time = 0
trigger1 = P2BodyDist X >= 50
value = 230

[State 240, 0] ;Close
type = ChangeAnim
triggerall = Time = 0
trigger1 = P2BodyDist X < 50
value = 260

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 29

[State 230, 2]
type = PlaySnd
trigger1 = Time = 3
value = 2, 3

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 63, 7
guardflag = MA
pausetime = 0,0
sparkno = S8030;1
sparkxy = -10,-60
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 230, 4]
type = VarAdd
v = 4
value = 1
trigger1 = var(4) = 0
trigger1 = Animelem = 5
trigger2 = (time = 1) && var(4) = 1

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; standing pugno debole con la spada (no fwd)
[Statedef 240]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 240                       
poweradd = 25                    
sprpriority = 2                  

[State 240, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,46

[State 240, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 27, 6                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12
guard.sparkno = s8040                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; standing pugno forte con spada
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 250, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 47

[State 250, 2]
type = PlaySnd
trigger1 = Time = 4
value = 2,1

[State 250, 3]
type = PlaySnd
trigger1 = Animelem = 12
value = 0,45

[State 250, 4]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 57, 7
guardflag = MA
pausetime = 0,0
sparkno = 1
sparkxy = -10,-70
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 250, 5]
type = HitDef
trigger1 = AnimElem = 16
attr = S, NA
animtype  = Medium
damage    = 57, 7
guardflag = MA
pausetime = 0,0
sparkno = 1
sparkxy = -10,-70
hitsound   = S0,19
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 250, 6]
type = VarAdd
v = 4
value = 1
trigger1 = var(4) = 0
trigger1 = animelem = 17
trigger2 = (time = 1) && var(4) = 1

[State 250, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;standing calcio debole con spada (no fwd)
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 22
ctrl = 0
velset = 0,0
anim = 260
sprpriority = 2

[State 260, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 27

[State 260, 2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Medium
damage    = 26, 5
guardflag = MA
pausetime = 0,0
sparkno = 0
sparkxy = -10,-37
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 260, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;standing calcio forte (con la spada)
[Statedef 270]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 270
sprpriority = 2

[State 270, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 29

[State 270, 2]
type = PlaySnd
trigger1 = Time = 3
value = 2, 3

[State 270, 3]
type = HitDef
trigger1 = AnimElem = 5 || animelem = 6
trigger1 = movecontact = 0
attr = S, NA
animtype  = Medium
damage    = 63, 7
guardflag = MA
pausetime = 0,0
sparkno = 1
sparkxy = -10,-60
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 270, 4]
type = VarAdd
v = 4
value = 1
trigger1 = var(4) = 0
trigger1 = animelem = 7
trigger2 = (time = 1) && var(4) = 1

[State 270, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; FWD standing pugno debole senza spada
[Statedef 280]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 280                       
poweradd = 30                    
sprpriority = 2                  

[State 280, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,28

[State 280, 1]
type = VarAdd
v = 4
value = 1
trigger1 = animelem = 6

[State 280, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 43, 8                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 4                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12
guard.sparkno = s8040               ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 280, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD standing pugno debole senza spada addon 1
[Statedef 282]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 200                       
poweradd = 20                    
sprpriority = 2                  

[State 282, 0]
type = PlaySnd
trigger1 = Time = 20
value = 0,28

[State 282, 1]
type = AfterImage
;paladd = 0,0,200
palbright = 0,0,200
time = 20
trans = add1
trigger1 = stateno = 282
persistent = 1

[State 282, 1 bis]
type = PalFx
add = 0,0,40
trigger1 = stateno = 282
time = 15

[State 282, 2]
type = VarAdd
v = 4
value = 1
trigger1 = animelem = 5

[State 282, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12
guard.sparkno = s8040              ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 282, 4]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 5                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12
guard.sparkno = s8040               ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 282, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD standing pugno debole senza spada addon 2
[Statedef 285]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 285                       
poweradd = 30                    
sprpriority = 2 

[State 285, unguardable]
type = AssertSpecial
flag = unguardable
trigger1 = stateno = 285
persistent = 1                 

[State 285, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,28

[State 285, 1]
type = PlaySnd
trigger1 = time = 4
value = 2, 7

[State 285, 2]
type = AfterImage
paladd = 0,0,200
time = 15
trigger1 = stateno = 285
persistent = 1

[State 285, 3]
type = VarAdd
v = 4
value = 1
trigger1 = time = 1

[State 285, 4]
type = HitDef
trigger1 = movecontact = 0
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 43, 8                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 4                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = 5, 0                  ;Sound to play on hit
guardsound = 6, 0
guard.sparkno = s8040              ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 285, 5]
type = VarSet
v = 4
value = 0
trigger1 = Animtime = 0

[State 285, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD standing calcio debole senza spada
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 30
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 2

[State 290, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 28

[State 290, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 43, 8
guardflag = MA
pausetime = 2,4
sparkno = 0
sparkxy = -10,-37
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 290, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; FWD standing pugno debole con spada
[Statedef 300]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 300                       
poweradd = 30                    
sprpriority = 2                  

[State 300, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,44

[State 300, 1]
type = VarAdd
v = 4
value = 1
trigger1 = animtime = -6

[State 300, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = Animelem = 10
trigger5 = Animelem = 11
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 53, 10                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 4                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD standing pugno debole con spada addon 1
[Statedef 302]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 240                       
poweradd = 25                    
sprpriority = 2                 

[State 302, 0]
type = PlaySnd
trigger1 = Time = 20
value = 0,46

[State 302, 1]
type = AfterImage
palbright = 0,0,200
time = 20
trans = add1
trigger1 = stateno = 302
persistent = 1

[State 302, 2]
type = PalFx
add = 0,0,40
trigger1 = stateno = 302
time = 15

[State 302, 3]
type = VarAdd
v = 4
value = 1
trigger1 = animelem = 8

[State 302, 4]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 27, 6                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0,16                  ;Sound to play on hit
guardsound = S0,12                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 302, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD Pugno debole con spada addon 2
[Statedef 305]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
anim = 305                       
poweradd = 30                    
sprpriority = 2 

[State 305, unguardable]
type = AssertSpecial
flag = unguardable
trigger1 = stateno = 305
persistent = 1                                  

[State 305, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0,28

[State 305, 1]
type = PlaySnd
trigger1 = time = 4
value = 2, 7

[State 305, 2]
type = AfterImage
paladd = 0,0,200
time = 15
trigger1 = stateno = 305
persistent = 1

[State 305, 3]
type = VarAdd
v = 4
value = 1
trigger1 = time = 1

[State 305, 4]
type = HitDef
trigger1 = movecontact = 0
trigger1 = animelem = 7
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 53, 10                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 4                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = 5, 0                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 305, 5]
type = VarSet
v = 4
value = 0
trigger1 = Animtime = 0

[State 305, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FWD standing calcio debole con spada
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 30
ctrl = 0
velset = 0,0
anim = 310
sprpriority = 2

[State 310, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 28

[State 310, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
trigger5 = AnimElem = 9
trigger6 = AnimElem = 10
attr = S, NA
animtype  = Medium
damage    = 43, 8
guardflag = MA
pausetime = 2,4
sparkno = 0
sparkxy = -10,-37
hitsound   = S0,17
guardsound = S0,12
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 310, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;crouching light punch (no swd)
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 20
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 28

[State 400, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = 23, 5
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 0,0
sparkno = S8020;0
sparkxy = -10,-42
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching high punch (no swd)
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0, 29

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 2, 1

[State 410, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = C, NA
damage    = 57, 8
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S8030;1
sparkxy = -10,-55
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching light kick (no swd)
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 420
sprpriority = 2

[State 420, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 27

[State 420, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = Animelem = 2
trigger2 = Animelem = 3
attr = C, NA
damage    = 28, 5
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 0,0
sparkno = S8020;0
sparkxy = -10,-8
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching high kick (common)
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd = 70
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0,29

[State 430, 2]
type = PlaySnd
trigger1 = Time = 3
value = 2, 3


[State 1030, 0]
type = velset
x = 5 * p2BodyDist X/105
trigger1 = time = 0

[State 430, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = C, NA
damage = 72, 8
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = S8030;1
sparkxy = -5,-10
hitsound   = S0,19
guardsound = S0,12
guard.sparkno = s8040
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching light punch (swd)
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 20
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 46

[State 440, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 5
trigger2 = Animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
attr = C, NA
damage = 27, 5
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 0,0
sparkno = 0
sparkxy = -10,-42
hitsound   = S0,16
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 440, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching high punch (swd)
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 55
ctrl = 0
anim = 450
sprpriority = 2

[State 450, 0]
type = PlaySnd
trigger1 = Time = 1
value = 0, 47

[State 450, 1]
type = PlaySnd
trigger1 = Time = 1
value = 2, 1

[State 450, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
trigger3 = AnimElem = 12
trigger4 = Animelem = 13
attr = C, NA
damage    = 75, 9
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,14
sparkno = 1
sparkxy = -10,-55
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -7
air.velocity = -3,-4

[State 450, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;crouching light kick (swd)
[Statedef 460]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 460
sprpriority = 2

[State 460, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 27

[State 460, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = Animelem = 4
trigger2 = Animelem = 5
trigger3 = Animelem = 6
trigger4 = Animelem = 7
attr = C, NA
damage    = 28, 5
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 0,0
sparkno = 0
sparkxy = -10,-8
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 460, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;Jump light punch (no swd)
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 28

[State 600, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 20, 5
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = S8020;0
sparkxy = -10,-58
hitsound   = S0,17
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

;Jump high punch (no swd)
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 1]
type = PlaySnd
trigger1 = time = 1
value = 0,29

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 2,1

[State 610, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
attr = A, NA
damage = 72, 8
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = S8030;1
sparkxy = -10,-55
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

;Jump light kick (common)
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 620
sprpriority = 2

[State 620, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 27

[State 620, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
trigger5 = animelem = 7
attr = A, NA
damage = 26, 5
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = S8020;1
sparkxy = -25,-35
hitsound   = S0,16
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3

;Jump High Kick (no swd)
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0,29

[State 630, 2]
type = PlaySnd
trigger1 = animelem = 7
value = 2,3

[State 630, 2]
type = PlaySnd
trigger1 = Time = 10
value = 0,29

[State 630, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 3
trigger2 = animelem = 7
trigger3 = animelem = 9
attr = A, NA
damage    = 70, 8
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = S8030;1
sparkxy = -30,-40
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4

;Jump light punch (no swd)
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 46

[State 640, 2]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
trigger6 = animelem = 10
attr = A, NA
damage    = 30, 5
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = 0
sparkxy = -10,-58
hitsound   = S0,16
guardsound = S0,12
guard.sparkno = s8040
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

;Jump high punch (swd)
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 650
sprpriority = 2

[State 650, 1]
type = PlaySnd
trigger1 = time = 1
value = 0,47

[State 650, 2]
type = PlaySnd
trigger1 = Time = 2
value = 2,1

[State 650, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = time > 6 && time < 15
attr = A, NA
damage = 72, 8
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-55
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

;660 doesn't exist becouse light jump kick is common

;Jump High Kick (no swd)
[Statedef 670]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 670
sprpriority = 2

[State 670, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0,29

[State 670, 2]
type = PlaySnd
trigger1 = Time = 3
value = 2,3

[State 670, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = time > 6 && time < 15
attr = A, NA
damage    = 70, 8
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = S0,15
guardsound = S0,12
guard.sparkno = s8040
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4




;---------------------------------------------------------------------------
[Statedef 799]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 1100, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          ;Attributes: Standing, Special Throw
hitflag = M-          ;Affect only ground people who are not being hit
guardflag = L
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 1101       ;On success, KFM changes to state 800
p2stateno = 1102      ;If hit, p2 changes to state 802 in This cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1
hitsound = s5,9             ;Force p2 into falling down
envshake.time = 10
envshake.ampl = 5            ;Force p2 into falling down

[State 800, voce nobunaga]
type = PlaySnd
value = 2, 14
trigger1 = time = 12

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;presa normale vera e propria
[Statedef 800]
type    = S
movetype= A ;è un attacco, ma lo definisco così per far 
            ;apparire la spada quando estratta
physics = N
anim = 800
poweradd = 80
ctrl = 0

[State 800, bind 1]
type = TargetBind
time = 3
pos = 60, 0
trigger1 = time = 0

[State 800, width 1]
type = Width
edge = 60,60
trigger1 = time < 3
persistent = 1

[State 800, bind 2]
type = TargetBind
time = 3
pos = 70, 0
trigger1 = time = 3

[State 800, width 2]
type = Width
edge = 70,70
trigger1 = time >= 3 && time < 6
persistent = 1

[State 800, bind (da 3 a 5) ]
type = TargetBind
time = 9
pos = 50,0
trigger1 = time = 6

[State 800, width (da 3 a 5) ]
type = Width
edge = 50,50
trigger1 = time >=6 && time < 15

[State 800, voce nobunaga]
type = PlaySnd
value = 2, 7
trigger1 = time = 12

[State 800, bind 6]
type = TargetBind
time = 1
pos = -20, -6
trigger1 = time = 15

[State 800, vel caduta nemico]
type = TargetVelSet
trigger1 = time = 16
x = 2
y = 2

[State 800, nemico si gira (anche se non si nota, come deve essere)]
type = targetfacing
trigger1 = time > 16
trigger1 = target, Pos Y >= 0
value = 1

[State 800, suono caduta]
type = PlaySnd
trigger1 = time = 19
value = 0, 5

[State 800, nemico striscia a terra]
type = TargetVelSet
trigger1 = time > 16
trigger1 = target, Pos Y >= 0
x = -4
y = 0

[State 800, nemico riceve colpo]
type = TargetLifeAdd
trigger1 = time = 17
value = -100

[State 800, nemico finisce di strisciare a terra]
type = TargetVelSet
trigger1 = time = 37
x = 0
y = 0

[State 800, riposizionamento finale]
type = Posadd
trigger1 = animtime = 0
value = 13 * facing

[State 800, giocatore girati]
type = Turn
trigger1 = animtime = 0

[State 800, fine presa]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;tentativo di presa normale
[Statedef 801]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 801
sprpriority = 2

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 801, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 800       ;On success, KFM changes to state 800
p2stateno = 802       ;If hit, p2 changes to state 802 in This cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 801, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = ifelse(var(10)=1,220,210)

;sei stato colpito dalla presa normale
[Statedef 802]
type = A
movetype = H
physics = N

[State 802, 0]
type = sprpriority
trigger1 = time = 0
value = -1

[State 802, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 802

;[State 802, 2]
;type = ChangeAnim2
;trigger1 = alive = 0
;value = 5150

[State 802, 3]
type = SelfState
trigger1 = time = 47
trigger1 = alive
value = 5120

[State 802, 4]
type = SelfState
trigger1 = time = 47
trigger1 = alive = 0
value = 5150

;increase power
[StateDef 815]
type    = S
movetype= A ; non è attacco ma definito così per sword gestor  
velset = 0,0
anim = ifelse(var(10)=1,816,815)
ctrl = 0

[State 815, 0]
type = VarSet
v = 8
value = time-(80*(time/80))
trigger1 = 1

[State 815, 1]
type = PlaySnd
value = 2,9
trigger1 = var(8) = 0

[State 815, 2]
type = PalFX
trigger1 = var(8) = 0
time = 80
sinadd = 0,0,200,8
persistent = 1

[State 815, 3]
type = PowerAdd
value = 7
trigger1 = 1

[State 815, 4]
type = ChangeState
value = 0
ctrl = 1
trigger1 = command != "hold c" || command != "hold z" || power = 3000

;Statedef thinked for erasing appearence error
[StateDef 940]
type    = S
movetype = A
physics = A
anim = 940
ctrl = ifelse(var(30)=1,0,1)

[State 940, 0]
type = Null
trigger1 = time = 0


 ;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)

;---------------------------------------------------------------------------

[Statedef -3]



[State -3, Jump Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 50 ;Jump land
;trigger2 = stateno = 106 ;Run-back land
value = 40, 1

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0
